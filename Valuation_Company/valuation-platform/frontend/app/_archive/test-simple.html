<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ì´ˆê°„ë‹¨ í…ŒìŠ¤íŠ¸</title>
    <style>
        body {
            font-family: Arial;
            margin: 0;
            padding: 0;
            background: #f0f0f0;
        }
        .test-content {
            padding: 40px;
        }
        .container {
            display: flex;
            gap: 20px;
        }
        .main {
            flex: 1;
            background: white;
            padding: 20px;
        }
        .sidebar-wrapper {
            width: 320px;
            background: yellow;
            min-height: 200px;
        }
    </style>
</head>
<body>
    <!-- ê³µí†µ í—¤ë” -->
    <div id="header-container"></div>

    <div class="test-content">
    <h1>ğŸ” ì´ˆê°„ë‹¨ ì‚¬ì´ë“œë°” í…ŒìŠ¤íŠ¸</h1>

    <div class="container">
        <div class="main">
            <h2>ë©”ì¸ ì˜ì—­</h2>
            <p>ìš°ì¸¡ ë…¸ë€ìƒ‰ ì˜ì—­ì— ì‚¬ì´ë“œë°”ê°€ ì£¼ì…ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.</p>
        </div>

        <div id="sidebar-container" class="sidebar-wrapper">
            ì—¬ê¸°ì— ì‚¬ì´ë“œë°”ê°€ ë“¤ì–´ê°‘ë‹ˆë‹¤...
        </div>
    </div>
    </div> <!-- /test-content -->

    <!-- í—¤ë” ë¡œë“œ -->
    <script>
        fetch('../components/header.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('header-container').innerHTML = data;
                const scripts = document.getElementById('header-container').querySelectorAll('script');
                scripts.forEach(script => {
                    const newScript = document.createElement('script');
                    if (script.src) {
                        newScript.src = script.src;
                    } else {
                        newScript.textContent = script.textContent;
                    }
                    document.body.appendChild(newScript);
                });
            })
            .catch(error => console.error('í—¤ë” ë¡œë“œ ì‹¤íŒ¨:', error));
    </script>

    <script>
        console.log('=== í…ŒìŠ¤íŠ¸ ì‹œì‘ ===');
        console.log('1. sidebar-container ì°¾ê¸°:', document.getElementById('sidebar-container'));
    </script>

    <script type="module">
        console.log('2. ëª¨ë“ˆ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ë¨');

        try {
            console.log('3. common-sidebar.js import ì‹œë„...');
            const module = await import('../components/common-sidebar.js');
            console.log('4. import ì„±ê³µ!', module);
            console.log('5. injectSidebar í•¨ìˆ˜:', module.injectSidebar);

            if (module.injectSidebar) {
                console.log('6. injectSidebar í˜¸ì¶œ ì‹œì‘...');
                module.injectSidebar('sidebar-container', 1, 'not_requested', null, null);
                console.log('7. âœ… injectSidebar í˜¸ì¶œ ì™„ë£Œ!');
            } else {
                console.error('âŒ injectSidebar í•¨ìˆ˜ê°€ ì—†ìŠµë‹ˆë‹¤!');
            }
        } catch (error) {
            console.error('âŒ ì—ëŸ¬ ë°œìƒ:', error);
            console.error('ì—ëŸ¬ ìŠ¤íƒ:', error.stack);
        }
    </script>
</body>
</html>
