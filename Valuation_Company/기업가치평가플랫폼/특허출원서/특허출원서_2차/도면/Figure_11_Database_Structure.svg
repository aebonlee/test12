<?xml version="1.0" encoding="UTF-8"?>
<svg width="1200" height="800" xmlns="http://www.w3.org/2000/svg">
  
  <!-- Pattern definitions for black and white patent drawings -->
  <defs>
    <pattern id="diagonal1" patternUnits="userSpaceOnUse" width="4" height="4">
      <rect width="4" height="4" fill="white"/>
      <path d="M0,4 L4,0" stroke="black" stroke-width="0.5"/>
    </pattern>
    <pattern id="diagonal2" patternUnits="userSpaceOnUse" width="6" height="6">
      <rect width="6" height="6" fill="white"/>
      <path d="M0,6 L6,0" stroke="black" stroke-width="0.5"/>
    </pattern>
    <pattern id="crosshatch" patternUnits="userSpaceOnUse" width="6" height="6">
      <rect width="6" height="6" fill="white"/>
      <path d="M0,6 L6,0 M0,0 L6,6" stroke="black" stroke-width="0.3"/>
    </pattern>
    <pattern id="dots" patternUnits="userSpaceOnUse" width="5" height="5">
      <rect width="5" height="5" fill="white"/>
      <circle cx="2.5" cy="2.5" r="0.5" fill="black"/>
    </pattern>
    <pattern id="vertical" patternUnits="userSpaceOnUse" width="4" height="4">
      <rect width="4" height="4" fill="white"/>
      <path d="M2,0 L2,4" stroke="black" stroke-width="0.5"/>
    </pattern>
    <pattern id="horizontal" patternUnits="userSpaceOnUse" width="4" height="4">
      <rect width="4" height="4" fill="white"/>
      <path d="M0,2 L4,2" stroke="black" stroke-width="0.5"/>
    </pattern>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="black"/>
    </marker>
    <marker id="fk-arrow" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="black"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="1200" height="800" fill="white" stroke="none"/>
  
  <!-- Title -->
  <text x="600" y="30" text-anchor="middle" font-family="Arial" font-size="18" font-weight="bold" fill="black">
    제11도 - 데이터베이스 구조 및 테이블 관계도
  </text>
  
  <!-- Main Container -->
  <rect x="50" y="60" width="1100" height="680" fill="none" stroke="black" stroke-width="3"/>
  <text x="70" y="85" font-family="Arial" font-size="14" font-weight="bold" fill="black">
    통합 데이터베이스 아키텍처
  </text>
  
  <!-- Core Tables Section -->
  <rect x="80" y="110" width="520" height="280" fill="url(#vertical)" stroke="black" stroke-width="2"/>
  <text x="340" y="135" text-anchor="middle" font-family="Arial" font-size="14" font-weight="bold" fill="black">
    핵심 테이블 구조
  </text>
  
  <!-- Evaluation Info Table -->
  <rect x="100" y="150" width="220" height="150" fill="url(#diagonal1)" stroke="black" stroke-width="2"/>
  <text x="210" y="170" text-anchor="middle" font-family="Arial" font-size="11" font-weight="bold" fill="black">
    평가정보 테이블
  </text>
  <text x="210" y="185" text-anchor="middle" font-family="Arial" font-size="10" fill="black">
    evaluation_info
  </text>
  <text x="110" y="205" font-family="Arial" font-size="9" font-weight="bold" fill="black">company_id (PK)</text>
  <text x="110" y="220" font-family="Arial" font-size="9" fill="black">evaluation_date</text>
  <text x="110" y="235" font-family="Arial" font-size="9" fill="black">method</text>
  <text x="110" y="250" font-family="Arial" font-size="9" fill="black">valuation</text>
  <text x="110" y="265" font-family="Arial" font-size="9" fill="black">normalized_metrics</text>
  <text x="110" y="280" font-family="Arial" font-size="9" fill="black">financial_data</text>
  <text x="110" y="295" font-family="Arial" font-size="9" fill="black">growth_forecast</text>
  
  <!-- Ranking Table -->
  <rect x="340" y="150" width="220" height="150" fill="url(#crosshatch)" stroke="black" stroke-width="2"/>
  <text x="450" y="170" text-anchor="middle" font-family="Arial" font-size="11" font-weight="bold" fill="black">
    랭킹 테이블
  </text>
  <text x="450" y="185" text-anchor="middle" font-family="Arial" font-size="10" fill="black">
    ranking
  </text>
  <text x="350" y="205" font-family="Arial" font-size="9" font-weight="bold" fill="black">ranking_id (PK)</text>
  <text x="350" y="220" font-family="Arial" font-size="9" font-weight="bold" fill="black">company_id (FK)</text>
  <text x="350" y="235" font-family="Arial" font-size="9" fill="black">category</text>
  <text x="350" y="250" font-family="Arial" font-size="9" fill="black">total_score</text>
  <text x="350" y="265" font-family="Arial" font-size="9" fill="black">rank</text>
  <text x="350" y="280" font-family="Arial" font-size="9" fill="black">sector_rank</text>
  <text x="350" y="295" font-family="Arial" font-size="9" fill="black">update_timestamp</text>
  
  <!-- Company Profile Table -->
  <rect x="100" y="320" width="220" height="110" fill="url(#horizontal)" stroke="black" stroke-width="2"/>
  <text x="210" y="340" text-anchor="middle" font-family="Arial" font-size="11" font-weight="bold" fill="black">
    기업 프로필 테이블
  </text>
  <text x="210" y="355" text-anchor="middle" font-family="Arial" font-size="10" fill="black">
    company_profile
  </text>
  <text x="110" y="375" font-family="Arial" font-size="9" font-weight="bold" fill="black">company_id (PK)</text>
  <text x="110" y="390" font-family="Arial" font-size="9" fill="black">company_name</text>
  <text x="110" y="405" font-family="Arial" font-size="9" fill="black">sector</text>
  <text x="110" y="420" font-family="Arial" font-size="9" fill="black">business_model</text>
  
  <!-- AI Avatar Table -->
  <rect x="340" y="320" width="220" height="110" fill="url(#dots)" stroke="black" stroke-width="2"/>
  <text x="450" y="340" text-anchor="middle" font-family="Arial" font-size="11" font-weight="bold" fill="black">
    AI 아바타 테이블
  </text>
  <text x="450" y="355" text-anchor="middle" font-family="Arial" font-size="10" fill="black">
    ai_avatar
  </text>
  <text x="350" y="375" font-family="Arial" font-size="9" font-weight="bold" fill="black">avatar_id (PK)</text>
  <text x="350" y="390" font-family="Arial" font-size="9" font-weight="bold" fill="black">company_id (FK)</text>
  <text x="350" y="405" font-family="Arial" font-size="9" fill="black">model_version</text>
  <text x="350" y="420" font-family="Arial" font-size="9" fill="black">personality_config</text>
  
  <!-- User & Investor Section -->
  <rect x="640" y="110" width="520" height="280" fill="url(#diagonal2)" stroke="black" stroke-width="2"/>
  <text x="900" y="135" text-anchor="middle" font-family="Arial" font-size="14" font-weight="bold" fill="black">
    사용자 및 투자자 테이블
  </text>
  
  <!-- Investor Profile Table -->
  <rect x="660" y="150" width="220" height="150" fill="white" stroke="black" stroke-width="2" stroke-dasharray="4,2"/>
  <text x="770" y="170" text-anchor="middle" font-family="Arial" font-size="11" font-weight="bold" fill="black">
    투자자 프로필 테이블
  </text>
  <text x="770" y="185" text-anchor="middle" font-family="Arial" font-size="10" fill="black">
    investor_profile
  </text>
  <text x="670" y="205" font-family="Arial" font-size="9" font-weight="bold" fill="black">investor_id (PK)</text>
  <text x="670" y="220" font-family="Arial" font-size="9" fill="black">preferred_sectors</text>
  <text x="670" y="235" font-family="Arial" font-size="9" fill="black">investment_size</text>
  <text x="670" y="250" font-family="Arial" font-size="9" fill="black">risk_preference</text>
  <text x="670" y="265" font-family="Arial" font-size="9" fill="black">investment_stage</text>
  <text x="670" y="280" font-family="Arial" font-size="9" fill="black">region_preference</text>
  <text x="670" y="295" font-family="Arial" font-size="9" fill="black">expected_return</text>
  
  <!-- Interest Data Table -->
  <rect x="900" y="150" width="220" height="150" fill="url(#vertical)" stroke="black" stroke-width="2"/>
  <text x="1010" y="170" text-anchor="middle" font-family="Arial" font-size="11" font-weight="bold" fill="black">
    관심도 데이터 테이블
  </text>
  <text x="1010" y="185" text-anchor="middle" font-family="Arial" font-size="10" fill="black">
    interest_data
  </text>
  <text x="910" y="205" font-family="Arial" font-size="9" font-weight="bold" fill="black">event_id (PK)</text>
  <text x="910" y="220" font-family="Arial" font-size="9" font-weight="bold" fill="black">investor_id (FK)</text>
  <text x="910" y="235" font-family="Arial" font-size="9" font-weight="bold" fill="black">company_id (FK)</text>
  <text x="910" y="250" font-family="Arial" font-size="9" fill="black">action_type</text>
  <text x="910" y="265" font-family="Arial" font-size="9" fill="black">timestamp</text>
  <text x="910" y="280" font-family="Arial" font-size="9" fill="black">session_id</text>
  <text x="910" y="295" font-family="Arial" font-size="9" fill="black">interaction_data</text>
  
  <!-- Matching Results Table -->
  <rect x="660" y="320" width="220" height="110" fill="black" stroke="black" stroke-width="2"/>
  <text x="770" y="340" text-anchor="middle" font-family="Arial" font-size="11" font-weight="bold" fill="white">
    매칭 결과 테이블
  </text>
  <text x="770" y="355" text-anchor="middle" font-family="Arial" font-size="10" fill="white">
    matching_results
  </text>
  <text x="670" y="375" font-family="Arial" font-size="9" font-weight="bold" fill="white">match_id (PK)</text>
  <text x="670" y="390" font-family="Arial" font-size="9" font-weight="bold" fill="white">investor_id (FK)</text>
  <text x="670" y="405" font-family="Arial" font-size="9" font-weight="bold" fill="white">company_id (FK)</text>
  <text x="670" y="420" font-family="Arial" font-size="9" fill="white">matching_score</text>
  
  <!-- Point Economy Table -->
  <rect x="900" y="320" width="220" height="110" fill="url(#crosshatch)" stroke="black" stroke-width="2"/>
  <text x="1010" y="340" text-anchor="middle" font-family="Arial" font-size="11" font-weight="bold" fill="black">
    포인트 관리 테이블
  </text>
  <text x="1010" y="355" text-anchor="middle" font-family="Arial" font-size="10" fill="black">
    point_management
  </text>
  <text x="910" y="375" font-family="Arial" font-size="9" font-weight="bold" fill="black">point_id (PK)</text>
  <text x="910" y="390" font-family="Arial" font-size="9" font-weight="bold" fill="black">company_id (FK)</text>
  <text x="910" y="405" font-family="Arial" font-size="9" fill="black">point_balance</text>
  <text x="910" y="420" font-family="Arial" font-size="9" fill="black">transaction_history</text>
  
  <!-- Data Relationships Section -->
  <rect x="80" y="460" width="1040" height="200" fill="url(#horizontal)" stroke="black" stroke-width="2"/>
  <text x="600" y="485" text-anchor="middle" font-family="Arial" font-size="14" font-weight="bold" fill="black">
    테이블 간 관계 및 인덱싱 최적화
  </text>
  
  <!-- Primary Relations -->
  <rect x="100" y="500" width="200" height="80" fill="white" stroke="black" stroke-width="2"/>
  <text x="200" y="520" text-anchor="middle" font-family="Arial" font-size="10" font-weight="bold" fill="black">주요 관계</text>
  <text x="110" y="540" font-family="Arial" font-size="8" fill="black">• company_profile ← evaluation_info</text>
  <text x="110" y="555" font-family="Arial" font-size="8" fill="black">• evaluation_info ← ranking</text>
  <text x="110" y="570" font-family="Arial" font-size="8" fill="black">• company_profile ← ai_avatar</text>
  
  <!-- Secondary Relations -->
  <rect x="320" y="500" width="200" height="80" fill="url(#diagonal1)" stroke="black" stroke-width="2"/>
  <text x="420" y="520" text-anchor="middle" font-family="Arial" font-size="10" font-weight="bold" fill="black">매칭 관계</text>
  <text x="330" y="540" font-family="Arial" font-size="8" fill="black">• investor_profile ← matching_results</text>
  <text x="330" y="555" font-family="Arial" font-size="8" fill="black">• company_profile ← matching_results</text>
  <text x="330" y="570" font-family="Arial" font-size="8" fill="black">• matching_results ← interest_data</text>
  
  <!-- Activity Relations -->
  <rect x="540" y="500" width="200" height="80" fill="url(#vertical)" stroke="black" stroke-width="2"/>
  <text x="640" y="520" text-anchor="middle" font-family="Arial" font-size="10" font-weight="bold" fill="black">활동 관계</text>
  <text x="550" y="540" font-family="Arial" font-size="8" fill="black">• investor_profile ← interest_data</text>
  <text x="550" y="555" font-family="Arial" font-size="8" fill="black">• company_profile ← interest_data</text>
  <text x="550" y="570" font-family="Arial" font-size="8" fill="black">• interest_data → behavioral_analysis</text>
  
  <!-- Point System Relations -->
  <rect x="760" y="500" width="200" height="80" fill="url(#dots)" stroke="black" stroke-width="2"/>
  <text x="860" y="520" text-anchor="middle" font-family="Arial" font-size="10" font-weight="bold" fill="black">포인트 관계</text>
  <text x="770" y="540" font-family="Arial" font-size="8" fill="black">• company_profile ← point_management</text>
  <text x="770" y="555" font-family="Arial" font-size="8" fill="black">• investor_profile → payment_history</text>
  <text x="770" y="570" font-family="Arial" font-size="8" fill="black">• point_management ← service_usage</text>
  
  <!-- Indexing Strategy -->
  <rect x="100" y="590" width="860" height="60" fill="white" stroke="black" stroke-width="2" stroke-dasharray="3,2"/>
  <text x="530" y="610" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold" fill="black">
    인덱싱 전략
  </text>
  <text x="110" y="630" font-family="Arial" font-size="10" fill="black">
    • 기업ID, 평가일자, 투자자ID 복합 인덱스 • 섹터별, 투자단계별 범위 검색 최적화
  </text>
  <text x="110" y="645" font-family="Arial" font-size="10" fill="black">
    • 매칭점수 내림차순 인덱스 • 관심도 점수 실시간 집계를 위한 파티셔닝 적용
  </text>
  
  <!-- Performance Optimization -->
  <rect x="80" y="680" width="1040" height="50" fill="url(#crosshatch)" stroke="black" stroke-width="2"/>
  <text x="600" y="705" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold" fill="black">
    성능 최적화: 읽기 전용 복제본, 캐시 레이어, 배치 처리를 통한 대용량 데이터 처리 및 실시간 쿼리 성능 보장
  </text>
  <text x="100" y="720" font-family="Arial" font-size="10" fill="black">
    분산 아키텍처 지원: 샤딩, 파티셔닝, 마이크로서비스 간 데이터 일관성 유지를 통한 확장성 확보
  </text>
  
  
  <!-- FK Relationships -->
  <line x1="320" y1="220" x2="340" y2="220" stroke="black" stroke-width="3" marker-end="url(#fk-arrow)"/>
  <line x1="560" y1="390" x2="660" y2="390" stroke="black" stroke-width="3" marker-end="url(#fk-arrow)"/>
  <line x1="880" y1="235" x2="900" y2="235" stroke="black" stroke-width="3" marker-end="url(#fk-arrow)"/>
  <line x1="320" y1="390" x2="340" y2="390" stroke="black" stroke-width="3" marker-end="url(#fk-arrow)"/>
  <line x1="320" y1="265" x2="900" y2="265" stroke="black" stroke-width="2" stroke-dasharray="5,5"/>
  <line x1="880" y1="390" x2="900" y2="390" stroke="black" stroke-width="3" marker-end="url(#fk-arrow)"/>
  
  <!-- Relationship Labels -->
  <text x="330" y="215" font-family="Arial" font-size="7" font-weight="bold" fill="black">FK</text>
  <text x="620" y="385" font-family="Arial" font-size="7" font-weight="bold" fill="black">FK</text>
  <text x="890" y="230" font-family="Arial" font-size="7" font-weight="bold" fill="black">FK</text>
  <text x="330" y="385" font-family="Arial" font-size="7" font-weight="bold" fill="black">FK</text>
  <text x="890" y="385" font-family="Arial" font-size="7" font-weight="bold" fill="black">FK</text>
  <text x="600" y="260" font-family="Arial" font-size="7" font-weight="bold" fill="black">Many-to-Many</text>
  
</svg>