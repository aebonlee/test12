# P4C1: 평가자 권한 관리

**Phase**: 4 - 인간 승인 시스템
**영역**: Authentication
**담당 AI**: backend-developer
**작업 ID**: P4C1

---

## 작업 개요

평가자 권한 관리 - 일반 사용자/전문 평가자/관리자

---

## 작업 목표

1. 안전한 인증/인가 시스템 구축
2. 사용자 세션 관리 및 보안 강화
3. 다양한 인증 방식 지원
4. 규정 준수 (보안 표준)

---

## 상세 요구사항

### 1. 인증 시스템

평가자 권한 관리 - 일반 사용자/전문 평가자/관리자

#### 인증 방식
- 이메일/비밀번호
- OAuth (Google, Kakao 등)
- JWT 토큰
- 리프레시 토큰

### 2. 인가 시스템

- 역할 기반 접근 제어 (RBAC)
- 권한 확인 미들웨어
- API 엔드포인트 보호
- 리소스 레벨 권한

### 3. 세션 관리

- JWT 토큰 생성 및 검증
- 토큰 만료 처리
- 리프레시 토큰 로테이션
- 로그아웃 처리

### 4. 보안 강화

- 비밀번호 해싱 (bcrypt)
- CSRF 보호
- XSS 방지
- Rate Limiting

---

## 기술 스택

### Authentication Provider
- **Supabase Auth**

### OAuth Providers
- **Google OAuth 2.0**
- **Kakao OAuth 2.0**

### Token Management
- **JWT**
- **Refresh Token**

### Security
- **bcrypt** (비밀번호 해싱)
- **helmet** (보안 헤더)

---

## 산출물

### 인증 모듈

```
backend/
├── auth/
│   ├── p4c1.ts
│   ├── middleware.ts
│   └── types.ts
└── config/
    └── auth.config.ts
```

### 주요 산출물
- 인증/인가 로직
- 미들웨어
- 설정 파일
- 타입 정의

### 문서
- 인증 플로우 다이어그램
- API 인증 가이드

---

## 완료 기준

- [ ] 인증 시스템 구현 완료
- [ ] JWT 토큰 발급/검증 동작
- [ ] 세션 관리 구현
- [ ] 보안 테스트 (OWASP 기준)
- [ ] 인증 플로우 문서화
- [ ] 인증 실패 시나리오 테스트

---

## 의존 작업

**이 작업을 시작하기 전에 다음 작업이 완료되어야 합니다:**

- P3C1


---

## 비고

roles 테이블 설계

---

## 작업 이력

- **작업 상태**: 대기
- **진도**: 0%
- **테스트/검토**: 대기

---
