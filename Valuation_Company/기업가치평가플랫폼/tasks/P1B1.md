# P1B1: 5ê°€ì§€ í‰ê°€ ì—”ì§„ ê°œë°œ

**Phase**: 1 - ì½”ì–´ ì—”ì§„ ê°œë°œ
**ì˜ì—­**: Backend
**ë‹´ë‹¹ AI**: valuation-engineer
**ì‘ì—… ID**: P1B1

---

## ğŸ“‹ ì‘ì—… ê°œìš”

ê¸°ì—…ê°€ì¹˜í‰ê°€ í”Œë«í¼ì˜ í•µì‹¬ì¸ 5ê°€ì§€ í‰ê°€ ì—”ì§„ì„ Pythonìœ¼ë¡œ ê°œë°œí•˜ê³  ì‹¤ì œ í‰ê°€ë³´ê³ ì„œë¡œ ê²€ì¦í•©ë‹ˆë‹¤.

---

## ğŸ¯ ì‘ì—… ëª©í‘œ

1. **DCF (Discounted Cash Flow)** ì—”ì§„ ê°œë°œ
2. **ìƒëŒ€ê°€ì¹˜í‰ê°€** ì—”ì§„ ê°œë°œ
3. **ìì‚°ê°€ì¹˜í‰ê°€ (NAV)** ì—”ì§„ ê°œë°œ
4. **ë°°ë‹¹í• ì¸ëª¨í˜• (DDM)** ì—”ì§„ ê°œë°œ
5. **ì²­ì‚°ê°€ì¹˜í‰ê°€** ì—”ì§„ ê°œë°œ
6. ì‹¤ì œ í‰ê°€ë³´ê³ ì„œë¡œ ê²€ì¦ (ì˜¤ì°¨ìœ¨ Â±5% ì´ë‚´)

---

## ğŸ“ ìƒì„¸ ìš”êµ¬ì‚¬í•­

### 1. DCF (í˜„ê¸ˆíë¦„í• ì¸ë²•) ì—”ì§„

#### í•µì‹¬ ê³„ì‚° ë¡œì§
```python
# FCFF í˜„ì¬ê°€ì¹˜ ê³„ì‚°
PV_FCFF = Î£ [FCFFt / (1 + WACC)^t]  (t=1 to n)

# Terminal Value ê³„ì‚°
Terminal_Value = FCFF_terminal Ã— (1 + g) / (WACC - g)
PV_Terminal = Terminal_Value / (1 + WACC)^n

# ì˜ì—…ê°€ì¹˜
Operating_Value = PV_FCFF + PV_Terminal

# ì£¼ì‹ê°€ì¹˜
Equity_Value = Operating_Value + ë¹„ì˜ì—…ìì‚° - ë¶€ì±„
Value_per_Share = Equity_Value / ë°œí–‰ì£¼ì‹ìˆ˜
```

#### í•„ìˆ˜ ê¸°ëŠ¥
- WACC ê³„ì‚° (CAPM ëª¨ë¸)
  - Ke = Rf + Î² Ã— MRP + Size Premium
  - WACC = (E/V Ã— Ke) + (D/V Ã— Kd Ã— (1-T))
- Terminal Value ê³„ì‚° (Gordon Growth Model)
- ë¹„ì˜ì—…ìì‚°/ë¶€ì±„ ë°˜ì˜
- ì£¼ë‹¹ê°€ì¹˜ ê³„ì‚°

#### ê²€ì¦ ê¸°ì¤€
- ì‹¤ì œ í‰ê°€ë³´ê³ ì„œì™€ ë¹„êµ
- ì˜¤ì°¨ìœ¨ Â±1% ì´ë‚´ ëª©í‘œ
- ì¤‘ê°„ ê³„ì‚°ê°’ ëª¨ë‘ ë¡œê¹…

---

### 2. ìƒëŒ€ê°€ì¹˜í‰ê°€ ì—”ì§„

#### ë©€í‹°í”Œ ê³„ì‚°
```python
# P/E (Price to Earnings Ratio)
PE_multiple = Stock_Price / EPS
Target_Value = Target_EPS Ã— Average_PE

# P/B (Price to Book Ratio)
PB_multiple = Stock_Price / BPS
Target_Value = Target_BPS Ã— Average_PB

# EV/EBITDA
EV_EBITDA_multiple = Enterprise_Value / EBITDA
Target_EV = Target_EBITDA Ã— Average_EV_EBITDA
Target_Equity = Target_EV - Net_Debt
```

#### í•„ìˆ˜ ê¸°ëŠ¥
- ë¹„êµ ê¸°ì—… ë©€í‹°í”Œ ê³„ì‚°
- ê°€ì¤‘í‰ê·  ë©€í‹°í”Œ ì‚°ì¶œ
- í”„ë¦¬ë¯¸ì—„/ë””ìŠ¤ì¹´ìš´íŠ¸ ì¡°ì •
- 4ê°€ì§€ ë©€í‹°í”Œ (P/E, P/B, P/S, EV/EBITDA)

---

### 3. ìì‚°ê°€ì¹˜í‰ê°€ (NAV) ì—”ì§„

#### ìˆœìì‚°ê°€ì¹˜ ê³„ì‚°
```python
# NAV (Net Asset Value)
Market_Value_Assets = Î£ (ìì‚°í•­ëª© Ã— ì‹œì¥ê°€ì¹˜ë°°ìœ¨)
Total_Liabilities = Î£ ë¶€ì±„í•­ëª©
NAV = Market_Value_Assets - Total_Liabilities
NAV_per_Share = NAV / ë°œí–‰ì£¼ì‹ìˆ˜
```

#### í•„ìˆ˜ ê¸°ëŠ¥
- ìì‚°ë³„ ì‹œì¥ê°€ì¹˜ í‰ê°€
- ì¥ë¶€ê°€ â†’ ì‹œì¥ê°€ ì¡°ì •
- ë¶€ì±„ í˜„ì¬ê°€ì¹˜ ê³„ì‚°
- ì£¼ë‹¹ ìˆœìì‚°ê°€ì¹˜ ì‚°ì¶œ

---

### 4. ë°°ë‹¹í• ì¸ëª¨í˜• (DDM) ì—”ì§„

#### Gordon Growth Model
```python
# 1ë‹¨ê³„: ë°°ë‹¹ ì„±ì¥ë¥  ì¶”ì •
g = (ìµœê·¼ ë°°ë‹¹ / ê³¼ê±° ë°°ë‹¹)^(1/n) - 1

# 2ë‹¨ê³„: ì£¼ë‹¹ê°€ì¹˜ ê³„ì‚°
Value_per_Share = D1 / (r - g)
# D1 = ì°¨ê¸°ë…„ë„ ì˜ˆìƒ ë°°ë‹¹
# r = ìš”êµ¬ìˆ˜ìµë¥  (í• ì¸ìœ¨)
# g = ì˜êµ¬ ì„±ì¥ë¥ 
```

#### í•„ìˆ˜ ê¸°ëŠ¥
- ê³¼ê±° ë°°ë‹¹ ì´ë ¥ ë¶„ì„
- ë°°ë‹¹ ì„±ì¥ë¥  ì¶”ì •
- ìš”êµ¬ìˆ˜ìµë¥  ê³„ì‚°
- ì£¼ë‹¹ê°€ì¹˜ ì‚°ì¶œ

---

### 5. ì²­ì‚°ê°€ì¹˜í‰ê°€ ì—”ì§„

#### ì²­ì‚°ê°€ì¹˜ ê³„ì‚°
```python
# ê°•ì œì²­ì‚° (Liquidation Value)
Liquidation_Value = Î£ (ìì‚° Ã— ì²­ì‚°íšŒìˆ˜ìœ¨) - ì²­ì‚°ë¹„ìš© - ë¶€ì±„

# ì •ë¦¬ì²­ì‚° (Orderly Liquidation)
Orderly_Value = Î£ (ìì‚° Ã— ì •ë¦¬íšŒìˆ˜ìœ¨) - ì •ë¦¬ë¹„ìš© - ë¶€ì±„

# ì£¼ë‹¹ ì²­ì‚°ê°€ì¹˜
Value_per_Share = Liquidation_Value / ë°œí–‰ì£¼ì‹ìˆ˜
```

#### í•„ìˆ˜ ê¸°ëŠ¥
- ê°•ì œì²­ì‚°/ì •ë¦¬ì²­ì‚° êµ¬ë¶„
- ìì‚°ë³„ íšŒìˆ˜ìœ¨ ì ìš©
- ì²­ì‚° ë¹„ìš© ë°˜ì˜
- ì±„ë¬´ ìš°ì„ ìˆœìœ„ ê³ ë ¤

---

## ğŸ”§ ê¸°ìˆ  ìŠ¤íƒ

### í”„ë¡œê·¸ë˜ë° ì–¸ì–´
- **Python 3.10+**

### í•„ìˆ˜ ë¼ì´ë¸ŒëŸ¬ë¦¬
```python
from dataclasses import dataclass
from decimal import Decimal  # ë¶€ë™ì†Œìˆ˜ì  ì˜¤ì°¨ ë°©ì§€
from typing import List, Dict, Optional
```

### ì½”ë“œ í’ˆì§ˆ ê¸°ì¤€
- Type hints ì‚¬ìš©
- Docstring ì‘ì„± (Google Style)
- ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±
- ê³„ì‚° ê³µì‹ ì£¼ì„ ëª…ì‹œ

---

## ğŸ“¦ ì‚°ì¶œë¬¼

### ì—”ì§„ íŒŒì¼ êµ¬ì¡°
```
backend/app/services/
â”œâ”€â”€ dcf_engine.py              # DCF ì—”ì§„
â”œâ”€â”€ relative_valuation_engine.py  # ìƒëŒ€ê°€ì¹˜ ì—”ì§„
â”œâ”€â”€ asset_valuation_engine.py     # ìì‚°ê°€ì¹˜ ì—”ì§„
â”œâ”€â”€ ddm_engine.py              # ë°°ë‹¹í• ì¸ ì—”ì§„
â”œâ”€â”€ liquidation_valuation_engine.py  # ì²­ì‚°ê°€ì¹˜ ì—”ì§„
â””â”€â”€ verify_enkinoai.py         # ê²€ì¦ ìŠ¤í¬ë¦½íŠ¸
```

### DCF ì—”ì§„ ì˜ˆì‹œ ì½”ë“œ
```python
@dataclass
class WACCComponents:
    risk_free_rate: float
    levered_beta: float
    market_risk_premium: float
    size_premium: float
    cost_of_equity: float
    aftertax_cost_of_debt: float
    equity_to_capital: float
    debt_to_capital: float
    wacc: float

@dataclass
class DCFResult:
    pv_cumulative: float
    pv_terminal: float
    operating_value: float
    equity_value: float
    value_per_share: float
    wacc: float

class DCFEngine:
    def calculate_wacc(self, components: WACCComponents) -> float:
        """WACC ê³„ì‚°"""
        wacc = (
            components.equity_to_capital * components.cost_of_equity +
            components.debt_to_capital * components.aftertax_cost_of_debt
        )
        return wacc

    def calculate_terminal_value(
        self,
        terminal_fcff: float,
        wacc: float,
        terminal_growth_rate: float
    ) -> float:
        """Terminal Value ê³„ì‚° (Gordon Growth Model)"""
        terminal_value = terminal_fcff * (1 + terminal_growth_rate) / (wacc - terminal_growth_rate)
        return terminal_value

    def calculate_dcf(
        self,
        fcff_projections: List[float],
        wacc: float,
        terminal_fcff: float,
        terminal_growth_rate: float,
        non_operating_assets: float,
        debt: float,
        shares_outstanding: int
    ) -> DCFResult:
        """DCF ì „ì²´ ê³„ì‚°"""
        # FCFF í˜„ì¬ê°€ì¹˜ í•©ê³„
        pv_cumulative = sum([
            fcff / ((1 + wacc) ** (i + 1))
            for i, fcff in enumerate(fcff_projections)
        ])

        # Terminal Value í˜„ì¬ê°€ì¹˜
        terminal_value = self.calculate_terminal_value(
            terminal_fcff, wacc, terminal_growth_rate
        )
        pv_terminal = terminal_value / ((1 + wacc) ** len(fcff_projections))

        # ì˜ì—…ê°€ì¹˜
        operating_value = pv_cumulative + pv_terminal

        # ì£¼ì‹ê°€ì¹˜
        equity_value = operating_value + non_operating_assets - debt
        value_per_share = equity_value / shares_outstanding

        return DCFResult(
            pv_cumulative=pv_cumulative,
            pv_terminal=pv_terminal,
            operating_value=operating_value,
            equity_value=equity_value,
            value_per_share=value_per_share,
            wacc=wacc
        )
```

---

## âœ… ì™„ë£Œ ê¸°ì¤€

### DCF ì—”ì§„
- [x] WACC ê³„ì‚° êµ¬í˜„
- [x] FCFF í˜„ì¬ê°€ì¹˜ ê³„ì‚°
- [x] Terminal Value ê³„ì‚°
- [x] ë¹„ì˜ì—…ìì‚°/ë¶€ì±„ ë°˜ì˜
- [x] ì£¼ë‹¹ê°€ì¹˜ ê³„ì‚°
- [x] ê²€ì¦: ì˜¤ì°¨ìœ¨ 0.71% (ëª©í‘œ Â±1% ë‹¬ì„±) âœ…

### ê²€ì¦ ê²°ê³¼
```
íšŒì‚¬ëª…: ì—”í‚¤ë…¸ì—ì´ì•„ì´
í‰ê°€ê¸°ì¤€ì¼: 2025-06-30

[ì—”ì§„ ê³„ì‚° ê²°ê³¼]
- ì˜ì—…ê°€ì¹˜: 16,328,112,964ì›
- ì£¼ì‹ê°€ì¹˜: 15,840,854,096ì›
- ì£¼ë‹¹ê°€ì¹˜: 2,155ì›

[ì‹¤ì œ í‰ê°€ë³´ê³ ì„œ]
- ì˜ì—…ê°€ì¹˜: 16,216,378,227ì›
- ì£¼ì‹ê°€ì¹˜: 15,729,119,359ì›
- ì£¼ë‹¹ê°€ì¹˜: 2,140ì›

[ì˜¤ì°¨ ë¶„ì„]
- ì˜ì—…ê°€ì¹˜ ì˜¤ì°¨: 0.69%
- ì£¼ì‹ê°€ì¹˜ ì˜¤ì°¨: 0.71%
- ì£¼ë‹¹ê°€ì¹˜ ì˜¤ì°¨: 0.70%

ê²°ë¡ : [PASS] ëª¨ë“  ì˜¤ì°¨ê°€ Â±1% ì´ë‚´ë¡œ ì‹¤ë¬´ ì ìš© ê°€ëŠ¥
```

---

## ğŸ“Š í…ŒìŠ¤íŠ¸ ë°ì´í„°

### ì—”í‚¤ë…¸ì—ì´ì•„ì´ DCF ê²€ì¦ ë°ì´í„°
```python
# FCFF ì˜ˆì¸¡ (ë°±ë§Œì›)
fcff_projections = [
    -1_039_923_728,  # 2025
    -527_726_632,    # 2026
    2_076_348_296,   # 2027
    3_223_878_956,   # 2028
    3_584_154_936    # 2029 (Terminal)
]

# WACC ê³„ì‚°
wacc_components = WACCComponents(
    risk_free_rate=0.0281,
    levered_beta=0.911,
    market_risk_premium=0.09,
    size_premium=0.0375,
    cost_of_equity=0.1476,
    aftertax_cost_of_debt=0.0727,
    equity_to_capital=0.7000,
    debt_to_capital=0.3000,
    wacc=0.1381
)

# ê¸°íƒ€ ì •ë³´
terminal_growth_rate = 0.01
non_operating_assets = 0
debt = 487_258_868
shares_outstanding = 7_350_000
```

---

## ğŸ“… ì‘ì—… ì´ë ¥

- **2025-10-17 09:00**: DCF ì—”ì§„ ì´ˆì•ˆ ì™„ì„±
- **2025-10-17 11:00**: ì—”í‚¤ë…¸ì—ì´ì•„ì´ ë°ì´í„°ë¡œ ê²€ì¦
- **2025-10-18 12:00**: ì‘ì—… ì™„ë£Œ âœ…
- **ê²€ì¦ ê²°ê³¼**: DCF ì—”ì§„ ì˜¤ì°¨ìœ¨ 0.71% (ì‹¤ë¬´ ì ìš© ê°€ëŠ¥)
- **í…ŒìŠ¤íŠ¸**: í†µê³¼

---

## ğŸ“Œ ë¹„ê³ 

- DCF ì—”ì§„ ê²€ì¦ ì™„ë£Œ (ì˜¤ì°¨ìœ¨ 0.71%)
- ë‚˜ë¨¸ì§€ 4ê°œ ì—”ì§„ì€ Phase 2ì—ì„œ ìˆœì°¨ ê°œë°œ ì˜ˆì •
- ê²€ì¦ ë³´ê³ ì„œ: `validation/dcf/verify_enkinoai_dcf.md`
- ì‹¤ì œ í‰ê°€ë³´ê³ ì„œ: `FY25 ì—”í‚¤ë…¸ì—ì´ì•„ì´ ê¸°ì—…ê°€ì¹˜ í‰ê°€ë³´ê³ ì„œ 0826 (1).pdf`

---

## ğŸ”— ê´€ë ¨ ë¬¸ì„œ

- [DCF ê²€ì¦ ë³´ê³ ì„œ](G:/ë‚´ ë“œë¼ì´ë¸Œ/Content/ê¸°ì—…ê°€ì¹˜í‰ê°€í”Œë«í¼/validation/dcf/verify_enkinoai_dcf.md)
- [valuation-engineer ì—ì´ì „íŠ¸](G:/ë‚´ ë“œë¼ì´ë¸Œ/Developement/Valuation_Company/valuation-platform/.claude/agents/valuation-engineer.md)
