# DCF 평가 입력 데이터 분류 및 자동화 설계

**작성일**: 2025-10-17
**목적**: DCF 평가 자동화 시스템의 입력 필드 정의 및 데이터 소스 분류

---

## 데이터 소스 분류 체계

```
📊 DCF 입력 데이터
├─ 🏢 [A] 회사 제출 자료 (파일 업로드)
├─ ⌨️  [B] 회사 직접 입력 (폼 입력)
├─ 🤖 [C] AI 자동 수집 (웹 검색/API)
└─ ✍️  [D] 평가자 판단 입력 (전문가 의견)
```

---

## 1. 회사 기본 정보

### 1.1 기본 식별 정보

| 항목 | 데이터 소스 | 입력 방법 | 필수 여부 |
|------|-------------|-----------|-----------|
| **회사명** | [B] 회사 입력 | 텍스트 입력 | 필수 |
| **사업자등록번호** | [B] 회사 입력 | 숫자 입력 | 필수 |
| **법인등록번호** | [B] 회사 입력 | 숫자 입력 | 필수 |
| **대표이사** | [B] 회사 입력 | 텍스트 입력 | 필수 |
| **설립일** | [B] 회사 입력 | 날짜 선택 | 필수 |
| **업종** | [B] 회사 입력 | 드롭다운 선택 | 필수 |
| **업종 코드 (KSIC)** | [C] AI 자동 수집 | 업종명 기반 자동 매핑 | 자동 |
| **본사 주소** | [B] 회사 입력 | 주소 입력 | 필수 |
| **임직원 수** | [B] 회사 입력 | 숫자 입력 | 선택 |
| **평가 기준일** | [B] 회사 입력 | 날짜 선택 | 필수 |

**입력 화면 예시**:
```
┌─────────────────────────────────────┐
│ 회사 기본 정보                       │
├─────────────────────────────────────┤
│ 회사명: [___________________]       │
│ 사업자번호: [___-__-_____]          │
│ 업종: [소프트웨어 개발 ▼]           │
│ 평가기준일: [2024-12-31 📅]        │
└─────────────────────────────────────┘
```

---

## 2. 역사적 재무제표 (Historical Financials)

### 2.1 재무제표 파일 업로드

| 항목 | 데이터 소스 | 입력 방법 | 필수 여부 |
|------|-------------|-----------|-----------|
| **재무제표 3개년** | [A] 회사 제출 | PDF/Excel 업로드 | 필수 |
| **감사보고서** | [A] 회사 제출 | PDF 업로드 | 필수 |
| **세무조정계산서** | [A] 회사 제출 | PDF/Excel 업로드 | 선택 |

**업로드 파일 요구사항**:
- 재무상태표 (Balance Sheet): 최근 3년
- 손익계산서 (Income Statement): 최근 3년
- 현금흐름표 (Cash Flow Statement): 최근 3년
- 외부감사보고서 (필수)

### 2.2 재무 데이터 자동 추출 (AI)

| 항목 | 데이터 소스 | 추출 방법 | 연도 |
|------|-------------|-----------|------|
| **매출액** | [C] AI 추출 | PDF/Excel 파싱 | 3년 |
| **영업이익** | [C] AI 추출 | PDF/Excel 파싱 | 3년 |
| **당기순이익** | [C] AI 추출 | PDF/Excel 파싱 | 3년 |
| **감가상각비** | [C] AI 추출 | PDF/Excel 파싱 | 3년 |
| **자본적지출 (CAPEX)** | [C] AI 추출 | 현금흐름표 | 3년 |
| **운전자본 변화** | [C] AI 추출 | 재무상태표 차이 | 3년 |
| **총자산** | [C] AI 추출 | 재무상태표 | 3년 |
| **총부채** | [C] AI 추출 | 재무상태표 | 3년 |
| **자본총계** | [C] AI 추출 | 재무상태표 | 3년 |
| **현금 및 현금성자산** | [C] AI 추출 | 재무상태표 | 기준일 |
| **차입금** | [C] AI 추출 | 재무상태표 | 기준일 |

**입력 화면 예시**:
```
┌─────────────────────────────────────┐
│ 재무제표 업로드                      │
├─────────────────────────────────────┤
│ 📄 재무제표 (최근 3개년)            │
│    [파일 선택] 또는 드래그           │
│                                     │
│ 📄 외부감사보고서                   │
│    [파일 선택] 또는 드래그           │
│                                     │
│ [AI 자동 추출 시작 🤖]              │
└─────────────────────────────────────┘

┌─────────────────────────────────────┐
│ 추출된 재무 데이터 (검토 필요)       │
├─────────────────────────────────────┤
│        2021     2022     2023       │
│ 매출액  8,500  12,300  18,500 ✓     │
│ 영업익   850    1,476   2,775 ✓     │
│ 순이익   590    1,020   1,944 ✓     │
│                                     │
│ [수정] [확정]                        │
└─────────────────────────────────────┘
```

### 2.3 재무 비율 자동 계산 (AI)

| 항목 | 계산 방법 | 용도 |
|------|-----------|------|
| **매출 성장률 (CAGR)** | (최종매출/초기매출)^(1/n) - 1 | 성장률 예측 참고 |
| **평균 영업이익률** | 영업이익 / 매출액 평균 | 목표 마진 설정 참고 |
| **평균 감가상각률** | 감가상각비 / 매출액 평균 | 예측 가정 |
| **평균 CAPEX 비율** | CAPEX / 매출액 평균 | 예측 가정 |
| **운전자본 회전율** | 매출 증가분 / 운전자본 증가 | 예측 가정 |
| **부채비율** | 총부채 / 총자본 | WACC 계산 |

---

## 3. 예측 가정 (Projection Assumptions)

### 3.1 매출 성장률 예측

| 항목 | 데이터 소스 | 입력 방법 | 기본값 |
|------|-------------|-----------|--------|
| **예측 연도 수** | [D] 평가자 입력 | 드롭다운 (3/5/7/10년) | 5년 |
| **Year 1 성장률** | [D] 평가자 입력 | % 입력 | 과거 평균 |
| **Year 2 성장률** | [D] 평가자 입력 | % 입력 | 과거 평균 × 0.9 |
| **Year 3 성장률** | [D] 평가자 입력 | % 입력 | 과거 평균 × 0.8 |
| **Year 4 성장률** | [D] 평가자 입력 | % 입력 | 과거 평균 × 0.7 |
| **Year 5 성장률** | [D] 평가자 입력 | % 입력 | 과거 평균 × 0.6 |
| **성장률 패턴** | [D] 평가자 선택 | 라디오 버튼 | 점진적 하락 |

**성장률 패턴 옵션**:
- 점진적 하락 (Conservative)
- 일정 성장 (Steady)
- 가속 성장 (Aggressive)
- 사용자 정의 (Custom)

**입력 화면 예시**:
```
┌─────────────────────────────────────┐
│ 매출 성장률 예측                     │
├─────────────────────────────────────┤
│ 과거 3년 CAGR: 47.5% (참고)         │
│                                     │
│ 패턴: ◉ 점진적 하락 ○ 일정 ○ 가속  │
│                                     │
│ 2024E: [44.0]%  (권장: 40-50%)      │
│ 2025E: [35.0]%  (권장: 30-40%)      │
│ 2026E: [30.0]%  (권장: 25-35%)      │
│ 2027E: [22.8]%  (권장: 20-25%)      │
│ 2028E: [20.0]%  (권장: 15-20%)      │
│                                     │
│ [AI 추천값 적용] [초기화]            │
└─────────────────────────────────────┘
```

### 3.2 영업이익률 가정

| 항목 | 데이터 소스 | 입력 방법 | 기본값 |
|------|-------------|-----------|--------|
| **목표 영업이익률** | [D] 평가자 입력 | % 입력 | 과거 평균 |
| **목표 달성 방식** | [D] 평가자 선택 | 라디오 버튼 | 즉시 적용 |
| **Year 1 마진** | [D] 평가자 입력 | % 입력 (조건부) | - |
| **Year 2 마진** | [D] 평가자 입력 | % 입력 (조건부) | - |
| **Year 3 마진** | [D] 평가자 입력 | % 입력 (조건부) | - |
| **Year 4 마진** | [D] 평가자 입력 | % 입력 (조건부) | - |
| **Year 5 마진** | [D] 평가자 입력 | % 입력 (조건부) | - |

**목표 달성 방식 옵션**:
- 즉시 적용: 모든 연도에 목표 마진 적용
- 점진적 개선: 연도별로 목표까지 선형 증가
- 사용자 정의: 각 연도별 직접 입력

### 3.3 비용 구조 가정

| 항목 | 데이터 소스 | 입력 방법 | 기본값 |
|------|-------------|-----------|--------|
| **법인세율** | [C] AI 수집 | 자동 (22%) | 22% |
| **감가상각률** | [C] AI 계산 | 과거 평균 (자동) | 과거 3년 평균 |
| **CAPEX 비율** | [D] 평가자 입력 | % 입력 | 과거 3년 평균 |
| **운전자본 증가율** | [D] 평가자 입력 | % 입력 | 과거 3년 평균 |

**AI 자동 계산 방식**:
```python
감가상각률 = (감가상각비 합계 / 매출액 합계) 평균 3년
CAPEX 비율 = (CAPEX 합계 / 매출액 합계) 평균 3년
운전자본율 = (운전자본 증가 / 매출 증가) 평균 3년
```

### 3.4 영구가치 가정

| 항목 | 데이터 소스 | 입력 방법 | 기본값 |
|------|-------------|-----------|--------|
| **영구성장률 (g)** | [D] 평가자 입력 | % 입력 | 2.5% |
| **영구가치 계산법** | [D] 평가자 선택 | 드롭다운 | Gordon Growth |

**영구성장률 권장 범위**: 2.0% ~ 3.0% (GDP 성장률 수준)

---

## 4. WACC 입력 데이터

### 4.1 자기자본비용 (Cost of Equity) - CAPM

| 항목 | 데이터 소스 | 입력 방법 | 기본값 |
|------|-------------|-----------|--------|
| **무위험이자율 (Rf)** | [C] AI 수집 | 자동 (10년 국고채) | 4.0% |
| **베타 (β)** | [C] AI 수집 또는 [D] 입력 | 업종 평균 or 직접 입력 | 업종별 |
| **시장위험프리미엄 (MRP)** | [C] AI 수집 | 자동 (역사적 평균) | 7.0% |

**데이터 수집 API**:
```
무위험이자율: 한국은행 API (10년 국고채 수익률)
베타: 업종별 평균 베타 (삼일PwC/KPMG 자료)
MRP: 역사적 주식시장 수익률 - 무위험이자율
```

**입력 화면 예시**:
```
┌─────────────────────────────────────┐
│ 자기자본비용 (CAPM)                  │
├─────────────────────────────────────┤
│ 무위험이자율 (Rf)                   │
│   🤖 자동: 4.0% (10년 국고채)       │
│   또는 수동: [____]%                │
│                                     │
│ 베타 (β)                            │
│   🤖 업종 평균: 1.15 (소프트웨어)   │
│   또는 수동: [____]                 │
│                                     │
│ 시장위험프리미엄 (MRP)               │
│   🤖 자동: 7.0% (역사적 평균)       │
│   또는 수동: [____]%                │
│                                     │
│ ➜ 자기자본비용: 12.05%              │
└─────────────────────────────────────┘
```

### 4.2 타인자본비용 (Cost of Debt)

| 항목 | 데이터 소스 | 입력 방법 | 기본값 |
|------|-------------|-----------|--------|
| **차입금 이자율** | [B] 회사 입력 | % 입력 | - |
| **회사채 수익률** | [C] AI 수집 (상장사) | 자동 | - |
| **신용등급** | [B] 회사 입력 | 드롭다운 | 무등급 |
| **등급별 금리** | [C] AI 수집 | 자동 (등급→금리 매핑) | - |

**비상장사 타인자본비용 계산**:
```
Option 1: 실제 차입금 이자율 사용 (회사 제공)
Option 2: 신용등급 기반 추정 (AI 매핑)
Option 3: 업종 평균 차입 금리 (AI 수집)
```

### 4.3 자본구조

| 항목 | 데이터 소스 | 입력 방법 | 기본값 |
|------|-------------|-----------|--------|
| **총차입금 (D)** | [C] AI 추출 | 재무상태표 자동 | - |
| **시가총액 (E)** | [D] 평가자 입력 | 직접 입력 or 장부가 | 장부가 |
| **부채비율 D/(D+E)** | [C] AI 계산 | 자동 계산 | - |
| **목표 자본구조** | [D] 평가자 선택 | 라디오 버튼 | 현재 구조 |

**자본구조 옵션**:
- 현재 구조 사용
- 업종 평균 구조 사용
- 목표 구조 직접 입력

---

## 5. 조정 항목 (Adjustments)

### 5.1 비영업자산/부채

| 항목 | 데이터 소스 | 입력 방법 | 필수 여부 |
|------|-------------|-----------|-----------|
| **현금 및 현금성자산** | [C] AI 추출 | 재무상태표 자동 | 필수 |
| **단기금융상품** | [C] AI 추출 | 재무상태표 자동 | 선택 |
| **장기금융상품** | [C] AI 추출 | 재무상태표 자동 | 선택 |
| **투자부동산** | [B] 회사 입력 | 금액 입력 | 선택 |
| **기타 비영업자산** | [B] 회사 입력 | 금액 입력 | 선택 |
| **단기차입금** | [C] AI 추출 | 재무상태표 자동 | 필수 |
| **장기차입금** | [C] AI 추출 | 재무상태표 자동 | 필수 |
| **회사채** | [C] AI 추출 | 재무상태표 자동 | 선택 |
| **리스부채** | [C] AI 추출 | 재무상태표 자동 | 선택 |

### 5.2 주식 정보

| 항목 | 데이터 소스 | 입력 방법 | 필수 여부 |
|------|-------------|-----------|-----------|
| **발행주식수** | [B] 회사 입력 | 숫자 입력 | 필수 |
| **자기주식** | [B] 회사 입력 | 숫자 입력 | 선택 |
| **우선주** | [B] 회사 입력 | 숫자 입력 | 선택 |
| **스톡옵션** | [B] 회사 입력 | 숫자 입력 | 선택 |

**입력 화면 예시**:
```
┌─────────────────────────────────────┐
│ 주식 정보                            │
├─────────────────────────────────────┤
│ 발행주식수: [1,000,000] 주          │
│ 자기주식:   [        0] 주          │
│ 우선주:     [        0] 주          │
│ 스톡옵션:   [        0] 주          │
│                                     │
│ ➜ 유통주식수: 1,000,000주           │
└─────────────────────────────────────┘
```

---

## 6. 외부 데이터 자동 수집 (AI/API)

### 6.1 거시경제 지표

| 항목 | 수집 소스 | API/방법 | 업데이트 주기 |
|------|-----------|----------|---------------|
| **10년 국고채 수익률** | 한국은행 | 한국은행 OpenAPI | 일간 |
| **GDP 성장률** | 한국은행 | 한국은행 OpenAPI | 분기 |
| **물가상승률 (CPI)** | 통계청 | 통계청 API | 월간 |
| **회사채 수익률 (등급별)** | 한국은행 | 한국은행 OpenAPI | 일간 |

### 6.2 업종 데이터

| 항목 | 수집 소스 | 방법 | 업데이트 주기 |
|------|-----------|------|---------------|
| **업종별 베타** | KPMG/PwC 자료 | 웹 스크래핑/DB | 분기 |
| **업종 평균 마진** | 한국은행/업종리포트 | 웹 스크래핑 | 연간 |
| **업종 성장률 전망** | 리서치 보고서 | 웹 스크래핑 | 분기 |
| **경쟁사 멀티플** | 증권사 리포트 | 웹 스크래핑 | 월간 |

### 6.3 상장사 데이터 (참고용)

| 항목 | 수집 소스 | API | 업데이트 주기 |
|------|-----------|-----|---------------|
| **유사기업 베타** | DART/KRX | DART API | 일간 |
| **유사기업 재무비율** | DART | DART API | 분기 |
| **유사기업 멀티플** | KRX | KRX API | 일간 |

---

## 7. 데이터 입력 프로세스 설계

### 7.1 단계별 워크플로우

```
Step 1: 회사 기본 정보 입력 (회사)
   ↓
Step 2: 재무제표 업로드 (회사)
   ↓
Step 3: AI 자동 데이터 추출 및 검증 (AI + 회사 확인)
   ↓
Step 4: 외부 데이터 자동 수집 (AI)
   - 무위험이자율, 베타, MRP, 업종 데이터
   ↓
Step 5: 예측 가정 입력 (평가자)
   - 성장률, 마진, CAPEX 등
   ↓
Step 6: WACC 파라미터 검토 및 조정 (평가자)
   ↓
Step 7: DCF 계산 실행 (자동)
   ↓
Step 8: 결과 검토 및 민감도 분석 (평가자)
   ↓
Step 9: 보고서 생성 (자동)
```

### 7.2 역할별 입력 책임

**🏢 회사 (피평가 기업)**
- 기본 정보 입력
- 재무제표 파일 업로드
- AI 추출 데이터 검증
- 주식 정보 입력
- 차입금 이자율 입력

**🤖 AI 시스템**
- 재무제표 데이터 자동 추출
- 거시경제 지표 수집
- 업종 데이터 수집
- 재무비율 자동 계산
- 권장값 제시

**✍️ 평가자 (전문가)**
- 매출 성장률 예측
- 영업이익률 목표 설정
- CAPEX/운전자본 가정
- WACC 파라미터 최종 확정
- 영구성장률 결정
- 특수 가정 입력

---

## 8. 데이터 검증 (Validation Rules)

### 8.1 필수 입력 검증

```python
# 필수 입력값 체크
required_fields = {
    'company_name': '회사명',
    'business_number': '사업자등록번호',
    'valuation_date': '평가기준일',
    'financial_statements': '재무제표 (3개년)',
    'shares_outstanding': '발행주식수'
}

# 재무제표 논리적 일관성 체크
validation_rules = {
    'balance_sheet': 'Assets == Liabilities + Equity',
    'growth_rate': '-50% < growth < 200%',
    'wacc': '0% < WACC < 30%',
    'terminal_growth': 'terminal_growth < WACC',
    'operating_margin': '-100% < margin < 100%'
}
```

### 8.2 경고 알림 (Warnings)

```
⚠️ 매출 성장률이 50%를 초과합니다. 지속 가능성을 검토하세요.
⚠️ 영업이익률이 과거 평균보다 30%p 높습니다.
⚠️ WACC가 20%를 초과합니다. 입력값을 확인하세요.
⚠️ 영구성장률이 WACC에 근접합니다. (TV 계산 불가능 위험)
```

---

## 9. UI/UX 설계 권장사항

### 9.1 입력 화면 구조

```
┌─────────────────────────────────────────────────┐
│  DCF 평가 입력 마법사                            │
├─────────────────────────────────────────────────┤
│  진행률: ████████░░░░░░░░ 50%                   │
│                                                 │
│  ① 기본정보  ② 재무제표  ③ 예측가정  ④ WACC    │
│     [완료]     [진행중]    [대기]    [대기]     │
├─────────────────────────────────────────────────┤
│                                                 │
│  [현재 단계 입력 폼]                             │
│                                                 │
│  [AI 권장값 표시]                                │
│  [도움말 툴팁]                                   │
│                                                 │
├─────────────────────────────────────────────────┤
│  [◀ 이전]          [저장]          [다음 ▶]    │
└─────────────────────────────────────────────────┘
```

### 9.2 스마트 기능

**자동 완성 (Auto-fill)**:
- 과거 데이터 기반 권장값 자동 표시
- 업종 평균값 참고 정보 제공

**실시간 계산 미리보기**:
- 입력값 변경 시 즉시 결과 업데이트
- "이 값을 변경하면 기업가치가 X% 변합니다"

**오류 방지**:
- 입력 범위 제한 (슬라이더)
- 실시간 validation 메시지
- 논리적 모순 자동 감지

---

## 10. 데이터 저장 구조

### 10.1 데이터베이스 스키마 (개념)

```sql
-- 회사 정보
CREATE TABLE companies (
    company_id UUID PRIMARY KEY,
    company_name VARCHAR(100),
    business_number VARCHAR(20),
    industry VARCHAR(50),
    created_at TIMESTAMP
);

-- 평가 프로젝트
CREATE TABLE valuation_projects (
    project_id UUID PRIMARY KEY,
    company_id UUID REFERENCES companies,
    valuation_date DATE,
    status VARCHAR(20), -- draft, in_progress, completed
    created_by VARCHAR(50),
    created_at TIMESTAMP
);

-- 재무 데이터
CREATE TABLE financial_data (
    data_id UUID PRIMARY KEY,
    project_id UUID REFERENCES valuation_projects,
    year INT,
    revenue DECIMAL,
    operating_income DECIMAL,
    data_source VARCHAR(20), -- uploaded, ai_extracted, manual
    verified BOOLEAN
);

-- 가정 (Assumptions)
CREATE TABLE assumptions (
    assumption_id UUID PRIMARY KEY,
    project_id UUID REFERENCES valuation_projects,
    assumption_type VARCHAR(50), -- growth_rate, margin, wacc
    year INT,
    value DECIMAL,
    input_by VARCHAR(20) -- company, evaluator, ai
);

-- 파일 업로드
CREATE TABLE uploaded_files (
    file_id UUID PRIMARY KEY,
    project_id UUID REFERENCES valuation_projects,
    file_type VARCHAR(50), -- financial_statement, audit_report
    file_path VARCHAR(500),
    uploaded_at TIMESTAMP
);
```

---

## 11. 입력 데이터 요약표

### 전체 입력 항목 통계

| 데이터 소스 | 항목 수 | 비율 | 자동화 가능 여부 |
|-------------|---------|------|------------------|
| **[A] 회사 파일 업로드** | 3개 | 5% | ❌ 수동 |
| **[B] 회사 직접 입력** | 15개 | 25% | ❌ 수동 |
| **[C] AI 자동 수집** | 25개 | 42% | ✅ 자동 |
| **[D] 평가자 판단 입력** | 17개 | 28% | △ 반자동 (권장값 제공) |
| **합계** | **60개** | **100%** | **약 42% 자동화** |

### 핵심 입력 필드 (반드시 필요)

**회사 제출 (3개)**:
1. 재무제표 3개년 (PDF/Excel)
2. 외부감사보고서 (PDF)
3. 발행주식수

**평가자 입력 (5개)**:
1. 매출 성장률 (5년)
2. 목표 영업이익률
3. WACC 파라미터 확정
4. 영구성장률
5. 평가 기준일

**AI 자동 처리 (나머지 모두)**:
- 재무 데이터 추출
- 재무 비율 계산
- 거시경제 지표 수집
- 업종 데이터 수집

---

## 12. 구현 우선순위

### Phase 1: MVP (최소 기능 제품)
✅ 회사 기본 정보 입력
✅ 재무제표 수동 입력 (Excel 템플릿)
✅ 예측 가정 입력 (평가자)
✅ WACC 수동 입력
✅ DCF 계산 실행

### Phase 2: 자동화
🤖 재무제표 PDF 자동 추출 (OCR/AI)
🤖 거시경제 지표 자동 수집 (API)
🤖 업종 데이터 수집
🤖 권장값 자동 제시

### Phase 3: 고도화
📊 실시간 민감도 분석
📊 시나리오 비교 (낙관/기준/비관)
📊 보고서 자동 생성
📊 데이터 시각화 대시보드

---

**작성 완료일**: 2025-10-17
**다음 단계**: 웹 UI 설계 및 데이터베이스 스키마 구현
