# ValueLink Project - Task 구성도 (28 Tasks)

## 전체 구조 시각화

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                          ValueLink 프로젝트 전체 구조                        │
│                              (총 28 Tasks)                                  │
└─────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════
                            S1: 개발 준비 (4 Tasks)
═══════════════════════════════════════════════════════════════════════════════

         ┌──────────────┐    ┌──────────────┐    ┌──────────────┐    ┌──────────────┐
         │   S1BI1      │    │    S1D1      │    │    S1M1      │    │    S1M2      │
         │              │    │              │    │              │    │              │
         │  Supabase    │    │  Database    │    │     API      │    │ Development  │
         │   Config     │    │   Schema     │    │    Spec      │    │   Workflow   │
         │              │    │              │    │              │    │    Guide     │
         └──────┬───────┘    └──────┬───────┘    └──────────────┘    └──────────────┘
                │                   │
                │                   │
                └─────────┬─────────┘
                          │
                          ▼
═══════════════════════════════════════════════════════════════════════════════
                         S2: 개발 1차 (12 Tasks)
═══════════════════════════════════════════════════════════════════════════════

┌─────────────────────────────────────────────────────────────────────────────┐
│                           Frontend (7 Tasks)                                │
└─────────────────────────────────────────────────────────────────────────────┘

    ┌──────────┐     ┌──────────┐     ┌──────────┐     ┌──────────┐
    │  S2F1    │     │  S2F2    │     │  S2F3    │     │  S2F4    │
    │          │     │          │     │          │     │          │
    │ Results  │────▶│Submission│     │  Guide   │     │ MyPage   │
    │ 5 Pages  │     │ 5 Forms  │     │ 5 Pages  │     │ 6 Roles  │
    └──────────┘     └──────────┘     └──────────┘     └──────────┘
         │                │
         │                │
         └────────┬───────┘
                  │
                  ▼
         ┌────────────────┐
         │     S2F5       │  ← depends on S2BA1
         │                │
         │ Process Steps  │
         │  12 Workflow   │
         └────────────────┘

    ┌──────────┐     ┌──────────┐
    │  S2F6    │     │  S2F7    │
    │          │     │          │
    │ Project  │     │  Auth +  │
    │  CRUD    │     │ Landing  │
    └──────────┘     └──────────┘


┌─────────────────────────────────────────────────────────────────────────────┐
│                          Backend APIs (4 Tasks)                             │
└─────────────────────────────────────────────────────────────────────────────┘

    ┌──────────┐     ┌──────────┐     ┌──────────┐     ┌──────────┐
    │  S2BA1   │     │  S2BA2   │     │  S2BA3   │     │  S2BA4   │
    │          │     │          │     │          │     │          │
    │Valuation │     │ Projects │     │Documents │     │ AI Client│
    │14-Step   │     │ & Quotes │     │& Reports │     │& Email   │
    │Workflow  │     │   API    │     │   API    │     │          │
    └────┬─────┘     └──────────┘     └──────────┘     └──────────┘
         │
         │ (핵심 API - S3, S4에서 의존)
         │
         ▼
═══════════════════════════════════════════════════════════════════════════════
                         S3: 개발 2차 (4 Tasks)
                         평가 엔진 통합
═══════════════════════════════════════════════════════════════════════════════

                  ┌─────────────────────┐
                  │      S3BA1          │
                  │                     │
                  │    Orchestrator     │◀───┐
                  │   (엔진 관리자)      │    │
                  └──────────┬──────────┘    │
                             │                │
                             ▼                │
                  ┌─────────────────────┐    │
                  │      S3BA2          │    │
                  │                     │    │
                  │  Financial Math     │────┘
                  │    (수학 라이브러리)  │
                  └──────────┬──────────┘
                             │
                ┌────────────┴────────────┐
                ▼                         ▼
    ┌──────────────────┐      ┌──────────────────┐
    │     S3BA3        │      │     S3BA4        │
    │                  │      │                  │
    │   DCF Engine     │      │  4 Other Engines │
    │ + Sensitivity    │      │ (Relative/Asset/ │
    │   Analysis       │      │ Intrinsic/Tax)   │
    └──────────────────┘      └──────────────────┘

    [Python 2,125줄 → TypeScript 포팅]


═══════════════════════════════════════════════════════════════════════════════
                         S4: 개발 3차 (5 Tasks)
                         외부 연동
═══════════════════════════════════════════════════════════════════════════════

┌─────────────────────────────────────────────────────────────────────────────┐
│                    News Crawler Infrastructure                              │
└─────────────────────────────────────────────────────────────────────────────┘

                  ┌─────────────────────┐
                  │      S4E1           │
                  │                     │
                  │  Base Crawler +     │
                  │  Crawler Manager    │
                  └──────────┬──────────┘
                             │
                             ▼
                  ┌─────────────────────┐
                  │      S4E2           │
                  │                     │
                  │   News Parser       │
                  │  (Data Extraction)  │
                  └──────────┬──────────┘
                             │
                ┌────────────┴────────────┐
                ▼                         ▼
    ┌──────────────────┐      ┌──────────────────┐
    │     S4E3         │      │     S4O1         │
    │                  │      │                  │
    │  6 Site-Specific │      │   Background     │
    │    Crawlers      │      │    Scheduler     │
    │ (Naver/Platum/   │      │                  │
    │  VentureSquare/  │      │                  │
    │  Outstanding/    │      │                  │
    │  StartupToday/   │      │                  │
    │  Wowtale)        │      │                  │
    └──────────────────┘      └──────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│                          Frontend & External                                │
└─────────────────────────────────────────────────────────────────────────────┘

         ┌──────────────┐              ┌──────────────┐
         │    S4F1      │              │    S4E4      │
         │              │              │              │
         │ Deal News    │              │   Enkino     │
         │  Tracker +   │              │    AI        │
         │  Link Page   │              │ Verification │
         └──────────────┘              └──────────────┘
            (2497줄 복잡도)


═══════════════════════════════════════════════════════════════════════════════
                         S5: 개발 마무리 (3 Tasks)
═══════════════════════════════════════════════════════════════════════════════

         ┌──────────────┐    ┌──────────────┐    ┌──────────────┐
         │    S5O1      │    │    S5T1      │    │    S5M1      │
         │              │    │              │    │              │
         │  Deployment  │    │  Testing &   │    │    Final     │
         │  & CI/CD     │    │     QA       │    │     Docs     │
         │              │    │              │    │              │
         └──────────────┘    └──────────────┘    └──────────────┘
              (5 files)         (3 files)           (4 files)
```

---

## 의존성 흐름도

```
S1 (준비)
  │
  ├─ S1BI1 ────────┐
  │                 │
  ├─ S1D1 ─────────┤
  │                 │
  ├─ S1M1          │
  │                 │
  └─ S1M2          │
                    ▼

S2 (핵심 플랫폼)     ◀─── 병렬 실행 가능
  │
  ├─ S2F1, S2F2, S2F3, S2F4, S2F6 (병렬)
  │
  ├─ S2BA1 ───────────────┐
  │   │                    │
  │   └─▶ S2F5 (의존)     │
  │                        │
  ├─ S2BA2 (병렬)         │
  ├─ S2BA3 (병렬)         │
  ├─ S2BA4 (병렬)         │
  │                        │
  └─ S2M1 (모든 S2F 완료 후)
                           │
                           ▼
S3 (평가 엔진)
  │
  ├─ S3BA1 ◀── S2BA1
  ├─ S3BA2
  │
  ├─ S3BA3 ◀── S3BA1, S3BA2
  └─ S3BA4 ◀── S3BA1, S3BA2
                           │
                           ▼
S4 (외부 연동)
  │
  ├─ S4E1 ◀── S1BI1
  │   │
  │   └─▶ S4E2
  │         │
  │         ├─▶ S4E3 (6개 크롤러)
  │         ├─▶ S4O1 (스케줄러)
  │         └─▶ S4F1 (Deal 페이지)
  │
  └─ S4E4 ◀── S2BA1
                           │
                           ▼
S5 (마무리)
  │
  ├─ S5O1 (모든 S2-S4 완료 후)
  ├─ S5T1 (모든 S2-S4 완료 후)
  └─ S5M1 (모든 S2-S4 완료 후)
```

---

## Stage별 파일 생성 현황

```
┌─────────┬───────────────────────────────────────┬─────────────┐
│ Stage   │ 생성 파일                             │ 파일 수     │
├─────────┼───────────────────────────────────────┼─────────────┤
│ S1      │ DB 설정, 스키마, 문서                  │ 12개        │
│ S2      │ 41개 페이지 + 13개 API + 11개 컴포넌트│ 65개        │
│ S3      │ 오케스트레이터 + 5개 엔진              │ 9개         │
│ S4      │ 크롤러 + 파서 + Deal 페이지           │ 13개        │
│ S5      │ 배포 + 테스트 + 문서                   │ 12개        │
├─────────┼───────────────────────────────────────┼─────────────┤
│ 합계    │                                       │ 111개       │
└─────────┴───────────────────────────────────────┴─────────────┘
```

---

## 핵심 검증 포인트

### 1. Frontend Coverage (72개 HTML → 8개 Task)

```
기존 72개 HTML 페이지:
  ├─ 5개 결과 페이지 ──────────────────▶ S2F1 (1 Task) ✅
  ├─ 6개 신청 폼 ─────────────────────▶ S2F2 (1 Task) ✅
  ├─ 5개 가이드 ──────────────────────▶ S2F3 (1 Task) ✅
  ├─ 6개 역할 마이페이지 ─────────────▶ S2F4 (1 Task) ✅
  ├─ 12개 프로세스 단계 ──────────────▶ S2F5 (1 Task) ✅
  ├─ 3개 프로젝트 관리 ───────────────▶ S2F6 (1 Task) ✅
  ├─ 5개 인증/랜딩 ───────────────────▶ S2F7 (1 Task) ✅
  ├─ 2개 Deal/Link ───────────────────▶ S4F1 (1 Task) ✅
  └─ 나머지 28개 페이지 ──────────────▶ 위 8개 Task에 포함됨

검증: 72개 페이지 모두 커버 ✅
```

### 2. Backend Coverage (126개 Python → 12개 Task)

```
기존 126개 Python 파일:
  ├─ 5개 평가 엔진 (2,125줄) ─────────▶ S3BA1~S3BA4 (4 Tasks) ✅
  ├─ 워크플로우 API ──────────────────▶ S2BA1 (1 Task) ✅
  ├─ 프로젝트/견적 API ───────────────▶ S2BA2 (1 Task) ✅
  ├─ 문서/보고서 API ─────────────────▶ S2BA3 (1 Task) ✅
  ├─ AI/이메일 서비스 ────────────────▶ S2BA4 (1 Task) ✅
  ├─ 6개 크롤러 구현 ─────────────────▶ S4E1~S4E3 (3 Tasks) ✅
  ├─ Enkino 연동 ─────────────────────▶ S4E4 (1 Task) ✅
  ├─ 스케줄러 ────────────────────────▶ S4O1 (1 Task) ✅
  └─ DB 설정 ─────────────────────────▶ S1BI1 (1 Task) ✅

검증: 핵심 기능 모두 커버 ✅
```

### 3. 누락된 기능 체크

```
✅ 14단계 워크플로우 ───────────▶ S2BA1, S2F5
✅ 22개 승인 포인트 ────────────▶ S2BA1 (approval-points.ts)
✅ 5개 평가 방법 ───────────────▶ S3BA3, S3BA4
✅ 무통장 입금 결제 ────────────▶ S2F5 (deposit/balance-payment)
✅ 파일 업로드 (Supabase) ──────▶ S2BA3 (documents API)
✅ PDF 보고서 생성 ─────────────▶ S2BA3 (reports API)
✅ 역할 기반 접근 제어 ─────────▶ S1D1 (RLS policies)
✅ 이메일 알림 ─────────────────▶ S2BA4 (email service)
✅ Deal 뉴스 크롤링 ────────────▶ S4E1~S4E3
✅ 관리자 대시보드 ─────────────▶ S2F4 (mypage/admin)

누락 없음 ✅
```

---

## 병렬 실행 가능 Task 매트릭스

```
┌──────┬─────────────────────────────────────────────────────────┐
│Stage │ 병렬 실행 가능한 Task 그룹                               │
├──────┼─────────────────────────────────────────────────────────┤
│ S1   │ S1BI1, S1D1, S1M1, S1M2 (모두 독립적)                  │
├──────┼─────────────────────────────────────────────────────────┤
│ S2   │ 그룹1: S2F1, S2F2, S2F3 (병렬)                         │
│      │ 그룹2: S2F4, S2F6 (병렬)                               │
│      │ 그룹3: S2BA1, S2BA2, S2BA3, S2BA4 (병렬)              │
│      │ 순차: S2F5 (S2BA1 후), S2M1 (모든 S2F 후)             │
├──────┼─────────────────────────────────────────────────────────┤
│ S3   │ 그룹1: S3BA1, S3BA2 (병렬)                            │
│      │ 그룹2: S3BA3, S3BA4 (S3BA1+S3BA2 후, 병렬 가능)      │
├──────┼─────────────────────────────────────────────────────────┤
│ S4   │ 순차: S4E1 → S4E2 → (S4E3 + S4O1 병렬) + S4F1        │
│      │ 독립: S4E4 (S2BA1 후)                                 │
├──────┼─────────────────────────────────────────────────────────┤
│ S5   │ S5O1, S5T1, S5M1 (모두 병렬 가능)                     │
└──────┴─────────────────────────────────────────────────────────┘

최대 병렬도: 7개 Task 동시 실행 가능 (S2 단계)
```

---

## 복잡도 분석

### High Complexity Tasks (5개)

```
1. S2F4: 역할별 마이페이지 (7개 파일, admin 2188줄)
2. S2F5: 프로세스 단계 (13개 파일, 14단계 워크플로우)
3. S3BA3: DCF 엔진 (504줄 Python → TypeScript 포팅)
4. S3BA4: 4개 엔진 (1,621줄 Python → TypeScript 포팅)
5. S4F1: Deal 페이지 (2497줄 복잡도)
```

### Medium Complexity Tasks (10개)

```
S2F1, S2F2, S2F3: 각 6개 파일 (템플릿 + 5개 변형)
S2BA1, S2BA2, S2BA3: 각 3-4개 파일 (API 엔드포인트)
S4E3: 6개 크롤러 구현
S5O1: 배포 설정 (5개 파일)
```

### Low Complexity Tasks (13개)

```
S1BI1, S1D1, S1M1, S1M2: 설정/문서
S2F6, S2F7: 각 3-5개 파일
S2BA4, S2M1: 서비스/문서
S3BA1, S3BA2: 오케스트레이터/라이브러리
S4E1, S4E2, S4E4, S4O1: 인프라
S5T1, S5M1: 테스트/문서
```

---

## 기존 자산 활용도

```
┌──────────────────────┬─────────────┬──────────────────────┐
│ 기존 자산            │ 재사용 방법  │ 해당 Task            │
├──────────────────────┼─────────────┼──────────────────────┤
│ 72개 HTML 페이지     │ UI/UX 참조  │ S2F1~S2F7, S4F1     │
│ 5개 평가 엔진 (2125줄)│ 포팅        │ S3BA3, S3BA4        │
│ 워크플로우 로직      │ 재구현      │ S2BA1               │
│ DB 스키마 (12 테이블)│ 수정 적용   │ S1D1                │
│ Supabase 통합 코드   │ 재사용      │ S1BI1               │
│ 6개 크롤러 구현      │ 포팅        │ S4E1~S4E3           │
│ AI 클라이언트        │ 재구현      │ S2BA4               │
└──────────────────────┴─────────────┴──────────────────────┘

재사용률: ~75% (디자인 재사용 + 로직 포팅)
```

---

## 리스크 평가

### Low Risk (안전한 Task)

```
✅ S1BI1: Supabase 클라이언트 (공식 문서 명확)
✅ S1D1: 스키마 정의 (이미 완성)
✅ S1M1, S1M2: 문서 작성
✅ S2F6, S2F7: 단순 페이지
✅ S5O1, S5T1, S5M1: 표준 작업
```

### Medium Risk (주의 필요)

```
⚠️ S2F1~S2F5: 템플릿 재사용성 (공통 컴포넌트 설계 중요)
⚠️ S2BA1: 14단계 워크플로우 (복잡도 높음)
⚠️ S4E3: 6개 사이트 크롤러 (사이트 구조 변경 가능성)
```

### High Risk (세심한 검증 필요)

```
🔴 S3BA3, S3BA4: Python → TypeScript 포팅 (계산 로직 정확성 필수)
🔴 S2F4: Admin 페이지 (2188줄, 권한 관리 복잡)
🔴 S4F1: Deal 페이지 (2497줄, 데이터 시각화 복잡)
```

---

## 최종 검증 결과

### ✅ 28개 Task로 충분한 이유

1. **높은 기존 완성도 (85%)**
   - 72개 HTML 페이지 완성 → UI/UX 디자인 재사용
   - 5개 평가 엔진 완성 (2,125줄) → 포팅만 하면 됨
   - 워크플로우 로직 완성 → 재구현만 하면 됨

2. **파일 기반 그룹핑 적용**
   - 같은 템플릿 공유 → 1 Task (5개 결과 페이지, 5개 신청 폼 등)
   - 병렬 작업 가능 → 통합 (프로젝트 CRUD)
   - 대용량만 분리 (Deal, Admin)

3. **핵심 기능 모두 커버**
   - 14단계 워크플로우 ✅
   - 22개 승인 포인트 ✅
   - 5개 평가 방법 ✅
   - 역할 기반 접근 제어 ✅
   - Deal 뉴스 크롤링 ✅

4. **의존성 관리 명확**
   - 각 Stage별 선행 조건 명확
   - 병렬 실행 가능 Task 식별됨
   - 순환 의존성 없음

5. **검증 가능성**
   - 각 Task마다 생성 파일 명확
   - Verification Instruction 작성 예정
   - 기존 Python 코드와 비교 가능

### ⚠️ 주의사항

1. **S3BA3, S3BA4 (엔진 포팅)**
   - Python → TypeScript 포팅 시 계산 정확도 검증 필수
   - 단위 테스트 철저히 작성

2. **S2F4 (Admin 페이지)**
   - 2188줄 복잡도 → 충분한 시간 배정 필요
   - 권한 관리 로직 검증

3. **S4F1 (Deal 페이지)**
   - 2497줄 복잡도 → 데이터 시각화 라이브러리 선택 중요

---

## 결론

**28개 Task는 충분합니다.** ✅

**근거:**
- 기존 완성도 85% (디자인 + 로직 완성)
- 파일 기반 그룹핑으로 효율적 통합
- 핵심 기능 100% 커버
- 의존성 관리 명확
- 병렬 실행 가능 (최대 7개 동시)

**다음 단계:**
1. 28개 Task Instruction 작성
2. 28개 Verification Instruction 작성
3. JSON 구조 설정 (index.json + 28개 grid_records)
4. S1 Task 실행 시작
