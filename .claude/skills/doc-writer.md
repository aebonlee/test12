# Doc Writer Skill

**PoliticianFinder í”„ë¡œì íŠ¸ ì „ìš© ê¸°ìˆ  ë¬¸ì„œ ì‘ì„± ìŠ¤í‚¬**

---

## í”„ë¡œì íŠ¸ ì»¨í…ìŠ¤íŠ¸

**í”„ë¡œì íŠ¸**: PoliticianFinder (AI ê¸°ë°˜ ì •ì¹˜ì¸ í‰ê°€ í”Œë«í¼)
**ê¸°ìˆ  ìŠ¤íƒ**:
- Frontend/Backend: Next.js 14, React, TypeScript
- Database: Supabase
- Deployment: Vercel

---

## AI-only ê°œë°œ ì›ì¹™ (í•„ìˆ˜ ì¤€ìˆ˜)

### âœ… í—ˆìš©
- Markdown íŒŒì¼ë¡œ ëª¨ë“  ë¬¸ì„œ ì‘ì„±
- CLI ëª…ë ¹ì–´ë¡œ ë¬¸ì„œ ìƒì„±
- ìë™í™”ëœ ë¬¸ì„œ ì—…ë°ì´íŠ¸

### âŒ ê¸ˆì§€
- Notion, Confluence ë“± GUI ë„êµ¬ ì‚¬ìš©
- Word, Google Docs ìˆ˜ë™ í¸ì§‘
- ì‚¬ìš©ìì—ê²Œ ìˆ˜ë™ ë¬¸ì„œ ì‘ì„± ìš”ì²­

**ìœ„ë°˜ ë°œê²¬ ì‹œ ì¦‰ì‹œ ì‘ì—… ì¤‘ë‹¨ ë° ëŒ€ì•ˆ íƒìƒ‰**

---

## ì—­í•  ë° ì±…ì„

ë‹¹ì‹ ì€ PoliticianFinder í”„ë¡œì íŠ¸ì˜ ê¸°ìˆ  ë¬¸ì„œ ì‘ì„±ìì…ë‹ˆë‹¤:

1. **API ë¬¸ì„œ**: ì—”ë“œí¬ì¸íŠ¸ ìŠ¤í™ ë° ì˜ˆì‹œ
2. **README ì‘ì„±**: í”„ë¡œì íŠ¸ ì†Œê°œ ë° ì‹œì‘ ê°€ì´ë“œ
3. **ì•„í‚¤í…ì²˜ ë¬¸ì„œ**: ì‹œìŠ¤í…œ ì„¤ê³„ ë° êµ¬ì¡°
4. **ì‚¬ìš©ì ê°€ì´ë“œ**: ê¸°ëŠ¥ ì‚¬ìš©ë²• ì„¤ëª…
5. **ê°œë°œì ê°€ì´ë“œ**: ê¸°ì—¬ ë°©ë²• ë° ì½”ë”© ê·œì¹™

---

## ë¬¸ì„œ êµ¬ì¡°

```
docs/
â”œâ”€â”€ README.md                  # í”„ë¡œì íŠ¸ ê°œìš”
â”œâ”€â”€ GETTING_STARTED.md         # ì‹œì‘ ê°€ì´ë“œ
â”œâ”€â”€ ARCHITECTURE.md            # ì•„í‚¤í…ì²˜
â”œâ”€â”€ CONTRIBUTING.md            # ê¸°ì—¬ ê°€ì´ë“œ
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ README.md              # API ê°œìš”
â”‚   â”œâ”€â”€ politicians.md         # ì •ì¹˜ì¸ API
â”‚   â”œâ”€â”€ evaluations.md         # í‰ê°€ API
â”‚   â””â”€â”€ users.md               # ì‚¬ìš©ì API
â”œâ”€â”€ guides/
â”‚   â”œâ”€â”€ deployment.md          # ë°°í¬ ê°€ì´ë“œ
â”‚   â”œâ”€â”€ testing.md             # í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ
â”‚   â””â”€â”€ troubleshooting.md     # ë¬¸ì œ í•´ê²°
â””â”€â”€ diagrams/
    â”œâ”€â”€ architecture.mmd       # ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨
    â””â”€â”€ erd.mmd                # ERD
```

---

## README.md ì‘ì„±

### í‘œì¤€ README í…œí”Œë¦¿

```markdown
# PoliticianFinder

> AI ê¸°ë°˜ ì •ì¹˜ì¸ í‰ê°€ í”Œë«í¼

[![CI](https://github.com/username/politicianfinder/workflows/CI/badge.svg)](https://github.com/username/politicianfinder/actions)
[![codecov](https://codecov.io/gh/username/politicianfinder/branch/main/graph/badge.svg)](https://codecov.io/gh/username/politicianfinder)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

---

## ğŸ“‹ ëª©ì°¨

- [ì†Œê°œ](#ì†Œê°œ)
- [ì£¼ìš” ê¸°ëŠ¥](#ì£¼ìš”-ê¸°ëŠ¥)
- [ê¸°ìˆ  ìŠ¤íƒ](#ê¸°ìˆ -ìŠ¤íƒ)
- [ì‹œì‘í•˜ê¸°](#ì‹œì‘í•˜ê¸°)
- [ì‚¬ìš©ë²•](#ì‚¬ìš©ë²•)
- [API ë¬¸ì„œ](#api-ë¬¸ì„œ)
- [ë°°í¬](#ë°°í¬)
- [ê¸°ì—¬í•˜ê¸°](#ê¸°ì—¬í•˜ê¸°)
- [ë¼ì´ì„ ìŠ¤](#ë¼ì´ì„ ìŠ¤)

---

## ğŸ¯ ì†Œê°œ

PoliticianFinderëŠ” ì‹œë¯¼ë“¤ì´ ì •ì¹˜ì¸ì„ ê°ê´€ì ìœ¼ë¡œ í‰ê°€í•˜ê³  ë¹„êµí•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•˜ëŠ” í”Œë«í¼ì…ë‹ˆë‹¤.

### ë¬¸ì œ ì¸ì‹
- ì •ì¹˜ì¸ì— ëŒ€í•œ ì •ë³´ê°€ íŒŒí¸í™”ë˜ì–´ ìˆìŒ
- ê°ê´€ì ì¸ í‰ê°€ ê¸°ì¤€ ë¶€ì¬
- ì •ì¹˜ì¸ ê°„ ë¹„êµê°€ ì–´ë ¤ì›€

### í•´ê²° ë°©ì•ˆ
- í†µí•©ëœ ì •ì¹˜ì¸ ë°ì´í„°ë² ì´ìŠ¤
- AI ê¸°ë°˜ í‰ê°€ ë¶„ì„
- ì§ê´€ì ì¸ ë¹„êµ ì¸í„°í˜ì´ìŠ¤

---

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

### 1. ì •ì¹˜ì¸ ê²€ìƒ‰ ë° í•„í„°ë§
- ì´ë¦„, ì •ë‹¹, ì§€ì—­ìœ¼ë¡œ ê²€ìƒ‰
- ë‹¤ì¤‘ í•„í„° ì§€ì›
- ì‹¤ì‹œê°„ ìë™ì™„ì„±

### 2. í‰ê°€ ì‹œìŠ¤í…œ
- 5ì  ì²™ë„ í‰ê°€
- ì¹´í…Œê³ ë¦¬ë³„ ì„¸ë¶€ í‰ê°€
  - ê³µì•½ ì´í–‰
  - ì†Œí†µ
  - ì „ë¬¸ì„±
- í‰ê°€ í†µê³„ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸

### 3. í†µê³„ ë° ë¶„ì„
- í‰ê·  í‰ì  ê³„ì‚°
- ì‹œê°„ë³„ ì¶”ì´ ê·¸ë˜í”„
- ì •ì¹˜ì¸ ê°„ ë¹„êµ

### 4. ì‚¬ìš©ì ì¸ì¦
- ì´ë©”ì¼/ë¹„ë°€ë²ˆí˜¸ ë¡œê·¸ì¸
- OAuth (Google, GitHub)
- ì•ˆì „í•œ ì„¸ì…˜ ê´€ë¦¬

---

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

### Frontend
- **Framework**: Next.js 14 (App Router)
- **UI Library**: React 18
- **Language**: TypeScript
- **Styling**: Tailwind CSS
- **State Management**: React Query

### Backend
- **API**: Next.js API Routes
- **Database**: Supabase (PostgreSQL)
- **Authentication**: Supabase Auth
- **ORM**: Supabase Client

### DevOps
- **Hosting**: Vercel
- **CI/CD**: GitHub Actions
- **Testing**: Jest, React Testing Library, Playwright
- **Monitoring**: Vercel Analytics

---

## ğŸš€ ì‹œì‘í•˜ê¸°

### í•„ìˆ˜ ìš”êµ¬ì‚¬í•­

- Node.js 18 ì´ìƒ
- npm ë˜ëŠ” yarn
- Supabase ê³„ì •
- Vercel ê³„ì • (ë°°í¬ ì‹œ)

### ì„¤ì¹˜

1. **ì €ì¥ì†Œ í´ë¡ **
```bash
git clone https://github.com/username/politicianfinder.git
cd politicianfinder/frontend
```

2. **ì˜ì¡´ì„± ì„¤ì¹˜**
```bash
npm install
```

3. **í™˜ê²½ë³€ìˆ˜ ì„¤ì •**
```bash
cp .env.example .env.local
```

`.env.local` íŒŒì¼ì„ ì—´ê³  ë‹¤ìŒ ê°’ì„ ì…ë ¥:
```env
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key
```

4. **ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜**
```bash
npx supabase db push
```

5. **ê°œë°œ ì„œë²„ ì‹¤í–‰**
```bash
npm run dev
```

ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:3000 ì ‘ì†

---

## ğŸ“– ì‚¬ìš©ë²•

### ì •ì¹˜ì¸ ê²€ìƒ‰
```typescript
// API í˜¸ì¶œ ì˜ˆì‹œ
const response = await fetch('/api/politicians?query=í™ê¸¸ë™');
const { data } = await response.json();
```

### í‰ê°€ ì‘ì„±
```typescript
const response = await fetch('/api/evaluations', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    politician_id: 'uuid',
    score: 4.5,
    comment: 'í›Œë¥­í•œ ì •ì¹˜ì¸ì…ë‹ˆë‹¤.',
  }),
});
```

ìì„¸í•œ ë‚´ìš©ì€ [API ë¬¸ì„œ](docs/api/README.md) ì°¸ì¡°

---

## ğŸ“š API ë¬¸ì„œ

### Base URL
```
Production: https://politicianfinder.vercel.app/api
Development: http://localhost:3000/api
```

### ì£¼ìš” ì—”ë“œí¬ì¸íŠ¸

| Method | Endpoint | ì„¤ëª… |
|--------|----------|------|
| GET | `/politicians` | ì •ì¹˜ì¸ ëª©ë¡ ì¡°íšŒ |
| GET | `/politicians/[id]` | ì •ì¹˜ì¸ ìƒì„¸ ì¡°íšŒ |
| POST | `/evaluations` | í‰ê°€ ìƒì„± |
| PUT | `/evaluations/[id]` | í‰ê°€ ìˆ˜ì • |
| DELETE | `/evaluations/[id]` | í‰ê°€ ì‚­ì œ |

ìƒì„¸ ë¬¸ì„œ: [API Reference](docs/api/README.md)

---

## ğŸ§ª í…ŒìŠ¤íŠ¸

```bash
# ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
npm test

# ì»¤ë²„ë¦¬ì§€ í¬í•¨
npm test -- --coverage

# E2E í…ŒìŠ¤íŠ¸
npx playwright test

# íŠ¹ì • í…ŒìŠ¤íŠ¸ë§Œ
npm test -- PoliticianCard
```

---

## ğŸš¢ ë°°í¬

### Vercel ë°°í¬ (ê¶Œì¥)

```bash
# Vercel CLI ì„¤ì¹˜
npm install -g vercel

# í”„ë¡œì íŠ¸ ë°°í¬
vercel

# Production ë°°í¬
vercel --prod
```

ìì„¸í•œ ë‚´ìš©: [ë°°í¬ ê°€ì´ë“œ](docs/guides/deployment.md)

---

## ğŸ¤ ê¸°ì—¬í•˜ê¸°

ê¸°ì—¬ë¥¼ í™˜ì˜í•©ë‹ˆë‹¤! ë‹¤ìŒ ë‹¨ê³„ë¥¼ ë”°ë¼ì£¼ì„¸ìš”:

1. Fork ì €ì¥ì†Œ
2. Feature ë¸Œëœì¹˜ ìƒì„± (`git checkout -b feature/amazing-feature`)
3. ë³€ê²½ì‚¬í•­ ì»¤ë°‹ (`git commit -m 'Add amazing feature'`)
4. ë¸Œëœì¹˜ì— Push (`git push origin feature/amazing-feature`)
5. Pull Request ìƒì„±

ìì„¸í•œ ë‚´ìš©: [CONTRIBUTING.md](CONTRIBUTING.md)

### ê°œë°œ ê°€ì´ë“œë¼ì¸

- TypeScript ì‚¬ìš© í•„ìˆ˜
- ESLint ê·œì¹™ ì¤€ìˆ˜
- í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ 80% ì´ìƒ ìœ ì§€
- AI-only ê°œë°œ ì›ì¹™ ì¤€ìˆ˜ (CLI/API ê¸°ë°˜ ì‘ì—…)

---

## ğŸ“„ ë¼ì´ì„ ìŠ¤

MIT License - ìì„¸í•œ ë‚´ìš©ì€ [LICENSE](LICENSE) íŒŒì¼ ì°¸ì¡°

---

## ğŸ“ ì—°ë½ì²˜

- ì´ë©”ì¼: contact@politicianfinder.com
- GitHub Issues: [Issues í˜ì´ì§€](https://github.com/username/politicianfinder/issues)

---

## ğŸ™ ê°ì‚¬ì˜ ê¸€

- [Next.js](https://nextjs.org/) - ì›¹ í”„ë ˆì„ì›Œí¬
- [Supabase](https://supabase.com/) - ë°±ì—”ë“œ ì„œë¹„ìŠ¤
- [Vercel](https://vercel.com/) - í˜¸ìŠ¤íŒ… í”Œë«í¼
- [Tailwind CSS](https://tailwindcss.com/) - UI í”„ë ˆì„ì›Œí¬
```

---

## API ë¬¸ì„œ ì‘ì„±

### API ì—”ë“œí¬ì¸íŠ¸ ë¬¸ì„œ í…œí”Œë¦¿

```markdown
# Politicians API

ì •ì¹˜ì¸ ê´€ë ¨ API ì—”ë“œí¬ì¸íŠ¸ ë¬¸ì„œ

---

## GET /api/politicians

ì •ì¹˜ì¸ ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤.

### Request

**Parameters**

| Name | Type | Required | Description |
|------|------|----------|-------------|
| page | number | No | í˜ì´ì§€ ë²ˆí˜¸ (ê¸°ë³¸ê°’: 1) |
| limit | number | No | í˜ì´ì§€ í¬ê¸° (ê¸°ë³¸ê°’: 20, ìµœëŒ€: 100) |
| party | string | No | ì •ë‹¹ í•„í„° |
| region | string | No | ì§€ì—­ í•„í„° |
| sort | string | No | ì •ë ¬ ê¸°ì¤€ (`rating`, `name`, `created_at`) |
| order | string | No | ì •ë ¬ ë°©í–¥ (`asc`, `desc`) |

**Example Request**

```bash
curl "https://politicianfinder.vercel.app/api/politicians?page=1&party=ë¯¼ì£¼ë‹¹&sort=rating&order=desc"
```

```typescript
const response = await fetch('/api/politicians?page=1&party=ë¯¼ì£¼ë‹¹');
const data = await response.json();
```

---

### Response

**Success Response (200 OK)**

```json
{
  "data": [
    {
      "id": "123e4567-e89b-12d3-a456-426614174000",
      "name": "í™ê¸¸ë™",
      "party": "ë¯¼ì£¼ë‹¹",
      "region": "ì„œìš¸",
      "avg_rating": 4.5,
      "evaluation_count": 150,
      "created_at": "2024-01-01T00:00:00Z"
    }
  ],
  "pagination": {
    "page": 1,
    "limit": 20,
    "total": 250,
    "total_pages": 13
  }
}
```

**Error Responses**

- **400 Bad Request**: ì˜ëª»ëœ íŒŒë¼ë¯¸í„°
```json
{
  "error": "Invalid page parameter"
}
```

- **500 Internal Server Error**: ì„œë²„ ì˜¤ë¥˜
```json
{
  "error": "Internal server error"
}
```

---

### Response Schema

**Politician Object**

| Field | Type | Description |
|-------|------|-------------|
| id | string (UUID) | ê³ ìœ  ì‹ë³„ì |
| name | string | ì´ë¦„ |
| party | string | ì •ë‹¹ |
| region | string | ì§€ì—­êµ¬ |
| avg_rating | number | í‰ê·  í‰ì  (0-5) |
| evaluation_count | number | í‰ê°€ ê°œìˆ˜ |
| created_at | string (ISO 8601) | ìƒì„± ì¼ì‹œ |

---

### Rate Limiting

- ì¸ì¦ë˜ì§€ ì•Šì€ ì‚¬ìš©ì: 100 requests/hour
- ì¸ì¦ëœ ì‚¬ìš©ì: 1000 requests/hour

---

### Examples

#### 1. ê¸°ë³¸ ì¡°íšŒ
```typescript
const { data } = await fetch('/api/politicians').then(r => r.json());
console.log(data); // ì²˜ìŒ 20ê°œ ì •ì¹˜ì¸
```

#### 2. í˜ì´ì§€ë„¤ì´ì…˜
```typescript
const page2 = await fetch('/api/politicians?page=2&limit=50').then(r => r.json());
```

#### 3. í•„í„°ë§
```typescript
const democrats = await fetch('/api/politicians?party=ë¯¼ì£¼ë‹¹').then(r => r.json());
const seoul = await fetch('/api/politicians?region=ì„œìš¸').then(r => r.json());
```

#### 4. ì •ë ¬
```typescript
const topRated = await fetch('/api/politicians?sort=rating&order=desc').then(r => r.json());
```

---

### Notes

- ëª¨ë“  ë‚ ì§œëŠ” UTC ê¸°ì¤€ ISO 8601 í˜•ì‹
- `avg_rating`ì€ ì†Œìˆ˜ì  1ìë¦¬ê¹Œì§€ í‘œì‹œ
- ì‚­ì œëœ ì •ì¹˜ì¸ì€ ê²°ê³¼ì— í¬í•¨ë˜ì§€ ì•ŠìŒ
```

---

## ì•„í‚¤í…ì²˜ ë¬¸ì„œ ì‘ì„±

```markdown
# Architecture

PoliticianFinder ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ë¬¸ì„œ

---

## ì‹œìŠ¤í…œ ê°œìš”

### High-Level Architecture

```mermaid
graph TB
    Client[Client Browser]
    NextJS[Next.js Server]
    Supabase[(Supabase)]
    Vercel[Vercel Edge Network]

    Client -->|HTTPS| Vercel
    Vercel -->|SSR/API| NextJS
    NextJS -->|PostgreSQL| Supabase
    NextJS -->|Auth| Supabase
```

---

## ê³„ì¸µ êµ¬ì¡°

### Frontend (Client-Side)

```
src/
â”œâ”€â”€ app/                    # App Router
â”‚   â”œâ”€â”€ layout.tsx          # Root Layout
â”‚   â”œâ”€â”€ page.tsx            # Homepage
â”‚   â”œâ”€â”€ politicians/        # ì •ì¹˜ì¸ í˜ì´ì§€
â”‚   â””â”€â”€ api/                # API Routes
â”œâ”€â”€ components/             # React ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ ui/                 # ê³µí†µ UI ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ politicians/        # ì •ì¹˜ì¸ ê´€ë ¨
â”‚   â””â”€â”€ evaluations/        # í‰ê°€ ê´€ë ¨
â”œâ”€â”€ lib/                    # ìœ í‹¸ë¦¬í‹°
â”‚   â”œâ”€â”€ supabase/           # Supabase í´ë¼ì´ì–¸íŠ¸
â”‚   â””â”€â”€ utils/              # í—¬í¼ í•¨ìˆ˜
â””â”€â”€ types/                  # TypeScript íƒ€ì…
```

---

### Backend (Server-Side)

```
src/app/api/
â”œâ”€â”€ politicians/
â”‚   â”œâ”€â”€ route.ts            # GET /api/politicians
â”‚   â””â”€â”€ [id]/
â”‚       â””â”€â”€ route.ts        # GET /api/politicians/[id]
â”œâ”€â”€ evaluations/
â”‚   â”œâ”€â”€ route.ts            # POST /api/evaluations
â”‚   â””â”€â”€ [id]/
â”‚       â””â”€â”€ route.ts        # PUT, DELETE /api/evaluations/[id]
â””â”€â”€ users/
    â””â”€â”€ route.ts            # User management
```

---

## ë°ì´í„° íë¦„

### 1. ì •ì¹˜ì¸ ì¡°íšŒ í”Œë¡œìš°

```mermaid
sequenceDiagram
    participant User
    participant Browser
    participant NextJS
    participant Supabase

    User->>Browser: ì •ì¹˜ì¸ ê²€ìƒ‰
    Browser->>NextJS: GET /politicians?query=í™ê¸¸ë™
    NextJS->>Supabase: SELECT * FROM politicians WHERE name LIKE '%í™ê¸¸ë™%'
    Supabase-->>NextJS: Result set
    NextJS-->>Browser: JSON Response
    Browser-->>User: ê²€ìƒ‰ ê²°ê³¼ í‘œì‹œ
```

---

### 2. í‰ê°€ ì‘ì„± í”Œë¡œìš°

```mermaid
sequenceDiagram
    participant User
    participant Browser
    participant NextJS
    participant Supabase

    User->>Browser: í‰ê°€ ì‘ì„± ë° ì œì¶œ
    Browser->>NextJS: POST /api/evaluations
    NextJS->>NextJS: ì…ë ¥ ê²€ì¦
    NextJS->>Supabase: ì¸ì¦ í™•ì¸ (getUser)
    Supabase-->>NextJS: User session
    NextJS->>Supabase: INSERT INTO evaluations
    Supabase-->>NextJS: Evaluation created
    NextJS->>Supabase: UPDATE politicians SET avg_rating
    NextJS-->>Browser: 201 Created
    Browser-->>User: ì„±ê³µ ë©”ì‹œì§€
```

---

## ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

### ERD (Entity Relationship Diagram)

```mermaid
erDiagram
    POLITICIANS ||--o{ EVALUATIONS : receives
    USERS ||--o{ EVALUATIONS : writes

    POLITICIANS {
        uuid id PK
        string name
        string party
        string region
        float avg_rating
        timestamp created_at
    }

    EVALUATIONS {
        uuid id PK
        uuid politician_id FK
        uuid user_id FK
        float score
        text comment
        json categories
        timestamp created_at
    }

    USERS {
        uuid id PK
        string email
        string name
        timestamp created_at
    }
```

---

## ë³´ì•ˆ ì•„í‚¤í…ì²˜

### Row Level Security (RLS)

```sql
-- Politicians: ëª¨ë‘ ì½ê¸° ê°€ëŠ¥
CREATE POLICY "Anyone can view politicians"
ON politicians FOR SELECT
USING (true);

-- Evaluations: ìì‹ ì˜ í‰ê°€ë§Œ CRUD
CREATE POLICY "Users can manage own evaluations"
ON evaluations FOR ALL
USING (auth.uid() = user_id);
```

### ì¸ì¦ í”Œë¡œìš°

```mermaid
graph LR
    A[Login] --> B{Supabase Auth}
    B -->|Success| C[JWT Token]
    C --> D[Set Cookie]
    D --> E[Authenticated Requests]
    B -->|Failure| F[Error Message]
```

---

## ì„±ëŠ¥ ìµœì í™”

### 1. Caching Strategy

```
Browser Cache (60s)
â†’ Vercel Edge Cache (300s)
â†’ Supabase (Database)
```

### 2. Database Optimization

- **Indexes**:
  - `politicians(avg_rating DESC)`
  - `evaluations(politician_id)`
  - `evaluations(user_id)`

- **Materialized Views**:
  - í‰ê°€ í†µê³„ (ë§¤ ì‹œê°„ ê°±ì‹ )

### 3. Frontend Optimization

- Code Splitting (Dynamic Import)
- Image Optimization (Next.js Image)
- React Query Caching

---

## í™•ì¥ì„±

### ìˆ˜í‰ í™•ì¥ (Horizontal Scaling)

- Vercel: ìë™ ìŠ¤ì¼€ì¼ë§
- Supabase: Read Replicas

### ìˆ˜ì§ í™•ì¥ (Vertical Scaling)

- Database ì¸ìŠ¤í„´ìŠ¤ ì—…ê·¸ë ˆì´ë“œ
- ìºì‹± ë ˆì´ì–´ ì¶”ê°€ (Redis)

---

## ëª¨ë‹ˆí„°ë§ ë° ë¡œê¹…

### Application Monitoring
- Vercel Analytics
- Supabase Dashboard

### Error Tracking
- Console logging
- Sentry (í–¥í›„ ë„ì…)

### Performance Metrics
- Core Web Vitals
- API Response Time
- Database Query Time

---

## ë°°í¬ ì•„í‚¤í…ì²˜

```mermaid
graph LR
    GitHub[GitHub Repository] -->|Push| Actions[GitHub Actions]
    Actions -->|Build| Vercel[Vercel]
    Vercel -->|Deploy| Edge[Edge Network]
    Edge -->|Serve| Users[Users]
```

### CI/CD Pipeline

1. **Code Push** â†’ GitHub
2. **CI Tests** â†’ GitHub Actions
3. **Build** â†’ Vercel
4. **Deploy** â†’ Edge Network
5. **Smoke Tests** â†’ Automated

---

## ê¸°ìˆ ì  ì˜ì‚¬ê²°ì •

### Why Next.js?
- âœ… SSR/SSG ì§€ì›
- âœ… API Routes ë‚´ì¥
- âœ… ë›°ì–´ë‚œ ê°œë°œ ê²½í—˜
- âœ… Vercel ìµœì í™”

### Why Supabase?
- âœ… PostgreSQL ê¸°ë°˜
- âœ… RLS ê¸°ë³¸ ì§€ì›
- âœ… ì¸ì¦ ì„œë¹„ìŠ¤ ë‚´ì¥
- âœ… Real-time ì§€ì›

### Why Vercel?
- âœ… Next.js ìµœì  í˜¸ìŠ¤íŒ…
- âœ… ìë™ ìŠ¤ì¼€ì¼ë§
- âœ… Edge Network
- âœ… CI/CD í†µí•©

---

## í–¥í›„ ê³„íš

### Phase 2
- [ ] Real-time í‰ê°€ ì—…ë°ì´íŠ¸
- [ ] ì†Œì…œ ê³µìœ  ê¸°ëŠ¥
- [ ] ê³ ê¸‰ í†µê³„ ëŒ€ì‹œë³´ë“œ

### Phase 3
- [ ] ëª¨ë°”ì¼ ì•± (React Native)
- [ ] AI ê¸°ë°˜ í‰ê°€ ë¶„ì„
- [ ] ë‹¤êµ­ì–´ ì§€ì›
```

---

## ë¬¸ì„œ ìë™í™”

### TypeDocìœ¼ë¡œ API ë¬¸ì„œ ìë™ ìƒì„±

```bash
# TypeDoc ì„¤ì¹˜
npm install -D typedoc

# ë¬¸ì„œ ìƒì„±
npx typedoc src/lib --out docs/api-reference
```

### JSDoc ì£¼ì„ ì˜ˆì‹œ

```typescript
/**
 * ì •ì¹˜ì¸ ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤.
 *
 * @param {Object} params - ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°
 * @param {number} params.page - í˜ì´ì§€ ë²ˆí˜¸ (ê¸°ë³¸ê°’: 1)
 * @param {number} params.limit - í˜ì´ì§€ í¬ê¸° (ê¸°ë³¸ê°’: 20)
 * @param {string} params.party - ì •ë‹¹ í•„í„°
 * @returns {Promise<PoliticiansResponse>} ì •ì¹˜ì¸ ëª©ë¡
 *
 * @example
 * ```typescript
 * const politicians = await getPoliticians({ page: 1, party: 'ë¯¼ì£¼ë‹¹' });
 * ```
 */
export async function getPoliticians(params: GetPoliticiansParams): Promise<PoliticiansResponse> {
  // êµ¬í˜„...
}
```

---

## ë¬¸ì„œ ì‘ì„± ì²´í¬ë¦¬ìŠ¤íŠ¸

### README.md
- [ ] í”„ë¡œì íŠ¸ ì†Œê°œ
- [ ] ì„¤ì¹˜ ë°©ë²•
- [ ] ì‚¬ìš©ë²•
- [ ] API ë¬¸ì„œ ë§í¬
- [ ] ê¸°ì—¬ ê°€ì´ë“œ
- [ ] ë¼ì´ì„ ìŠ¤

### API ë¬¸ì„œ
- [ ] ì—”ë“œí¬ì¸íŠ¸ ëª©ë¡
- [ ] Request/Response ìŠ¤í‚¤ë§ˆ
- [ ] ì˜ˆì‹œ ì½”ë“œ
- [ ] ì—ëŸ¬ ì½”ë“œ
- [ ] Rate limiting

### ì•„í‚¤í…ì²˜ ë¬¸ì„œ
- [ ] ì‹œìŠ¤í…œ ë‹¤ì´ì–´ê·¸ë¨
- [ ] ë°ì´í„° íë¦„
- [ ] ERD
- [ ] ë³´ì•ˆ ì„¤ê³„
- [ ] ë°°í¬ êµ¬ì¡°

### ì‚¬ìš©ì ê°€ì´ë“œ
- [ ] ìŠ¤í¬ë¦°ìƒ·
- [ ] ë‹¨ê³„ë³„ ì„¤ëª…
- [ ] FAQ
- [ ] ë¬¸ì œ í•´ê²°

---

**ì´ ìŠ¤í‚¬ì„ í™œì„±í™”í•˜ë©´, PoliticianFinder í”„ë¡œì íŠ¸ì˜ ëª¨ë“  ë¬¸ì„œë¥¼ ëª…í™•í•˜ê³  ì²´ê³„ì ìœ¼ë¡œ ì‘ì„±í•˜ì—¬ ê°œë°œìì™€ ì‚¬ìš©ì ê²½í—˜ì„ í–¥ìƒì‹œí‚µë‹ˆë‹¤.**
